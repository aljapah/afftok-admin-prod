%%{init: {'theme': 'dark'}}%%
flowchart LR
    subgraph Platforms["ðŸª E-Commerce Platforms"]
        Shopify["ðŸ›’ Shopify"]
        Salla["ðŸ›ï¸ Salla"]
        Zid["ðŸ“¦ Zid"]
        Woo["ðŸ”Œ WooCommerce"]
        Custom["âš™ï¸ Custom"]
    end

    subgraph Methods["ðŸ“¡ Integration Methods"]
        WebhookM["Webhook"]
        PixelM["Pixel"]
        APIM["API"]
    end

    subgraph AffTok["âš¡ AffTok Backend"]
        Receiver["Webhook Receiver"]
        Validator["Request Validator"]
        Processor["Conversion Processor"]
    end

    subgraph Storage["ðŸ’¾ Storage"]
        DB[("PostgreSQL")]
        Cache[("Redis")]
    end

    Shopify -->|Webhook| WebhookM
    Salla -->|Webhook| WebhookM
    Zid -->|Webhook| WebhookM
    Woo -->|Webhook| WebhookM
    Custom -->|Pixel/API| PixelM & APIM

    WebhookM --> Receiver
    PixelM --> Receiver
    APIM --> Receiver

    Receiver --> Validator
    Validator --> Processor
    Processor --> DB
    Processor --> Cache

