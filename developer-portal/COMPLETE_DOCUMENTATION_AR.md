# ğŸ“˜ Ù…Ù†ØµØ© AffTok - Ø§Ù„ØªÙˆØ«ÙŠÙ‚ Ø§Ù„ØªÙ‚Ù†ÙŠ Ø§Ù„Ø´Ø§Ù…Ù„

**Ø§Ù„Ø¥ØµØ¯Ø§Ø±:** 2.0.0  
**Ø§Ù„ØªØ§Ø±ÙŠØ®:** Ø¯ÙŠØ³Ù…Ø¨Ø± 2025  
**Ø§Ù„Ù…Ø¤Ù„Ù:** Ø¹Ø¨Ø¯Ø§Ù„Ø¹Ø²ÙŠØ² Ø§Ù„Ø¬Ø¨Ø§Ø­  
**Ø§Ù„Ù„ØºØ©:** Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©  
**Ø§Ù„Ø­Ø§Ù„Ø©:** Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¥Ù†ØªØ§Ø¬

---

## ğŸ“‘ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙŠØ§Øª

1. [Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹](#1-Ù†Ø¸Ø±Ø©-Ø¹Ø§Ù…Ø©-Ø¹Ù„Ù‰-Ø§Ù„Ù…Ø´Ø±ÙˆØ¹)
2. [Ù…Ø¹Ù…Ø§Ø±ÙŠØ© Ø§Ù„Ù†Ø¸Ø§Ù…](#2-Ù…Ø¹Ù…Ø§Ø±ÙŠØ©-Ø§Ù„Ù†Ø¸Ø§Ù…)
3. [ØªØµÙ…ÙŠÙ… Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª](#3-ØªØµÙ…ÙŠÙ…-Ù‚Ø§Ø¹Ø¯Ø©-Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª)
4. [ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª](#4-ÙˆØ§Ø¬Ù‡Ø©-Ø¨Ø±Ù…Ø¬Ø©-Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª)
5. [Ø®Ø¯Ù…Ø© ØªØªØ¨Ø¹ Ø§Ù„Ù†Ù‚Ø±Ø§Øª](#5-Ø®Ø¯Ù…Ø©-ØªØªØ¨Ø¹-Ø§Ù„Ù†Ù‚Ø±Ø§Øª)
6. [ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù‡Ø§ØªÙ Ø§Ù„Ù…Ø­Ù…ÙˆÙ„ (Flutter)](#6-ØªØ·Ø¨ÙŠÙ‚-Ø§Ù„Ù‡Ø§ØªÙ-Ø§Ù„Ù…Ø­Ù…ÙˆÙ„)
7. [Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ© (RBAC)](#7-Ù„ÙˆØ­Ø©-Ø§Ù„ØªØ­ÙƒÙ…-Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ©)
8. [Ø¨ÙˆØ§Ø¨Ø© ØªÙƒØ§Ù…Ù„ Ø§Ù„Ù…Ø¹Ù„Ù†ÙŠÙ†](#8-Ø¨ÙˆØ§Ø¨Ø©-ØªÙƒØ§Ù…Ù„-Ø§Ù„Ù…Ø¹Ù„Ù†ÙŠÙ†)
9. [Ø§Ù„Ø£Ù…Ø§Ù† ÙˆÙƒØ´Ù Ø§Ù„Ø§Ø­ØªÙŠØ§Ù„](#9-Ø§Ù„Ø£Ù…Ø§Ù†-ÙˆÙƒØ´Ù-Ø§Ù„Ø§Ø­ØªÙŠØ§Ù„)
10. [Ø§Ù„Ø§Ø³ØªÙ‡Ø¯Ø§Ù Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ (GeoIP)](#10-Ø§Ù„Ø§Ø³ØªÙ‡Ø¯Ø§Ù-Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ)
11. [Ø¯Ù„ÙŠÙ„ Ø§Ù„ØªØ«Ø¨ÙŠØª ÙˆØ§Ù„Ù†Ø´Ø±](#11-Ø¯Ù„ÙŠÙ„-Ø§Ù„ØªØ«Ø¨ÙŠØª-ÙˆØ§Ù„Ù†Ø´Ø±)
12. [Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± ÙˆØ§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆÙ‡Ø§Øª](#12-Ø¯Ù„ÙŠÙ„-Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±-ÙˆØ§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆÙ‡Ø§Øª)
13. [Ø§Ø³ØªÙƒØ´Ø§Ù Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ ÙˆØ­Ù„Ù‡Ø§](#13-Ø§Ø³ØªÙƒØ´Ø§Ù-Ø§Ù„Ø£Ø®Ø·Ø§Ø¡-ÙˆØ­Ù„Ù‡Ø§)
14. [Ù…Ø±Ø¬Ø¹ API ÙˆØ­Ø¯ÙˆØ¯ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…](#14-Ù…Ø±Ø¬Ø¹-api-ÙˆØ­Ø¯ÙˆØ¯-Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…)
15. [Ø¯Ù„ÙŠÙ„ Ø§Ù„ØªØ±Ø­ÙŠÙ„](#15-Ø¯Ù„ÙŠÙ„-Ø§Ù„ØªØ±Ø­ÙŠÙ„)
16. [Ø§Ù„Ù…ØµØ·Ù„Ø­Ø§Øª](#16-Ø§Ù„Ù…ØµØ·Ù„Ø­Ø§Øª)
17. [Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©](#17-Ø§Ù„Ø£Ø³Ø¦Ù„Ø©-Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©)
18. [Ø³Ø¬Ù„ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª](#18-Ø³Ø¬Ù„-Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª)

---

## 1. Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹

### ğŸ¯ Ù…Ø§ Ù‡ÙŠ AffTokØŸ

**AffTok** Ù‡ÙŠ Ù…Ù†ØµØ© ØªØ³ÙˆÙŠÙ‚ Ø¨Ø§Ù„Ø¹Ù…ÙˆÙ„Ø© Ø¹Ù„Ù‰ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù…Ø¤Ø³Ø³Ø§Øª ØªØ±Ø¨Ø· Ø¨ÙŠÙ† Ø§Ù„Ù…Ø¹Ù„Ù†ÙŠÙ† ÙˆØ§Ù„Ù…Ø±ÙˆØ¬ÙŠÙ† Ù„Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª ÙˆØ§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª. ØªÙˆÙØ± Ø§Ù„Ù…Ù†ØµØ© Ù†Ø¸Ø§Ù…Ø§Ù‹ Ù…ØªÙƒØ§Ù…Ù„Ø§Ù‹ Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ø±ÙˆØ¶ØŒ ÙˆØªØªØ¨Ø¹ Ø§Ù„Ù†Ù‚Ø±Ø§Øª ÙˆØ§Ù„ØªØ­ÙˆÙŠÙ„Ø§ØªØŒ ÙˆØ­Ø³Ø§Ø¨ Ø§Ù„Ø¹Ù…ÙˆÙ„Ø§ØªØŒ ÙˆØªØ­Ù„ÙŠÙ„ Ù…Ù‚Ø§ÙŠÙŠØ³ Ø§Ù„Ø£Ø¯Ø§Ø¡.

### ğŸŒŸ Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©

#### Ù„Ù„Ù…Ø¹Ù„Ù†ÙŠÙ†:
- Ø¥Ù†Ø´Ø§Ø¡ ÙˆØ¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„ØªØ³ÙˆÙŠÙ‚ÙŠØ© Ù…Ø¹ Ø§Ø³ØªÙ‡Ø¯Ø§Ù ØªÙØµÙŠÙ„ÙŠ
- ØªØªØ¨Ø¹ Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø­Ù…Ù„Ø§Øª ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„ÙØ¹Ù„ÙŠ
- ØªØ­Ø¯ÙŠØ¯ Ù‡ÙŠØ§ÙƒÙ„ Ø§Ù„Ø¹Ù…ÙˆÙ„Ø§Øª ÙˆØ´Ø±ÙˆØ· Ø§Ù„Ø¯ÙØ¹
- Ø§Ù„Ø§Ø³ØªÙ‡Ø¯Ø§Ù Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ: Ø§Ø³ØªÙ‡Ø¯Ø§Ù Ø¯ÙˆÙ„ Ù…Ø­Ø¯Ø¯Ø© Ø£Ùˆ Ø­Ø¸Ø± Ù…Ù†Ø§Ø·Ù‚ Ù…Ø¹ÙŠÙ†Ø©
- Ø·Ø±Ù‚ ØªÙƒØ§Ù…Ù„ Ù…ØªØ¹Ø¯Ø¯Ø©: ShopifyØŒ Ø³Ù„Ø©ØŒ Ø²Ø¯ØŒ WooCommerceØŒ API Ù…Ø®ØµØµ
- Ø­Ù…Ø§ÙŠØ© Ù…Ù† Ø§Ù„Ø§Ø­ØªÙŠØ§Ù„ Ù…ØªØ¹Ø¯Ø¯Ø© Ø§Ù„Ø·Ø¨Ù‚Ø§Øª

#### Ù„Ù„Ù…Ø±ÙˆØ¬ÙŠÙ†:
- ØªØµÙØ­ Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ù…ØªØ§Ø­Ø© ÙˆØ§Ù„ØªÙ‚Ø¯ÙŠÙ… Ø¹Ù„ÙŠÙ‡Ø§
- Ø¥Ù†Ø´Ø§Ø¡ Ø±ÙˆØ§Ø¨Ø· ØªØªØ¨Ø¹ ÙØ±ÙŠØ¯Ø© ÙˆØ¢Ù…Ù†Ø© (Ù…ÙˆÙ‚Ø¹Ø© Ø¨Ù€ HMAC)
- Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ù†Ù‚Ø±Ø§Øª ÙˆØ§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„ÙØ¹Ù„ÙŠ
- ØªØªØ¨Ø¹ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ ÙˆØ§Ù„Ø¹Ù…ÙˆÙ„Ø§Øª
- Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© ÙÙŠ Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ­ÙÙŠØ² (Ø§Ù„Ø´Ø§Ø±Ø§ØªØŒ Ø§Ù„ÙØ±Ù‚ØŒ Ù„ÙˆØ­Ø§Øª Ø§Ù„Ù…ØªØµØ¯Ø±ÙŠÙ†)
- ØªØ­Ø¯ÙŠØ¯ Ø¯ÙˆÙ„ Ø§Ù„Ø¬Ù…Ù‡ÙˆØ± Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¹Ø±ÙˆØ¶ Ù…Ù†Ø§Ø³Ø¨Ø©

#### Ù„Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠÙ† (Ù†Ø¸Ø§Ù… RBAC):
| Ø§Ù„Ø¯ÙˆØ± | Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ÙˆØµÙˆÙ„ | Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª |
|-------|-------------|-----------|
| **Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ Ø§Ù„Ø£Ø¹Ù„Ù‰** | ÙƒØ§Ù…Ù„ | Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙŠØ²Ø§Øª + Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† + Ø³Ø¬Ù„ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© |
| **Ù…Ø³Ø¤ÙˆÙ„ Ø§Ù„Ù…Ø§Ù„ÙŠØ©** | Ù…Ø§Ù„ÙŠ | Ø§Ù„ÙÙˆØ§ØªÙŠØ±ØŒ ØªØ­Ù„ÙŠÙ„Ø§Øª Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§ØªØŒ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…Ø§Ù„ÙŠØ© |
| **Ù…Ø³Ø¤ÙˆÙ„ Ø§Ù„ØªÙ‚Ù†ÙŠØ©** | ØªÙ‚Ù†ÙŠ | Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø©ØŒ Ø§Ù„Ø³Ø¬Ù„Ø§ØªØŒ WebhooksØŒ ÙƒØ´Ù Ø§Ù„Ø§Ø­ØªÙŠØ§Ù„ |
| **Ù…Ø¯ÙŠØ± Ø§Ù„Ù…Ø¹Ù„Ù†ÙŠÙ†** | Ø§Ù„Ø­Ù…Ù„Ø§Øª | Ø§Ù„Ø¹Ø±ÙˆØ¶ØŒ Ø§Ù„Ø´Ø¨ÙƒØ§ØªØŒ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ù…Ù„Ø§Øª |
| **Ø¯Ø¹Ù… Ø§Ù„Ù…Ø±ÙˆØ¬ÙŠÙ†** | Ø§Ù„Ø¯Ø¹Ù… | Ø¯Ø¹Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†ØŒ Ø§Ù„ÙØ±Ù‚ØŒ Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø§Øª |
| **Ù…Ø±Ø§Ø¬Ø¹ Ø§Ù„Ø§Ø­ØªÙŠØ§Ù„** | Ø§Ù„Ø£Ù…Ø§Ù† | ÙƒØ´Ù Ø§Ù„Ø§Ø­ØªÙŠØ§Ù„ØŒ Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠØ§ØŒ Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„Ù…Ø´Ø¨ÙˆÙ‡ |

### ğŸ“Š Ø§Ù„Ù…ÙƒØ¯Ø³ Ø§Ù„ØªÙ‚Ù†ÙŠ

| Ø§Ù„Ù…ÙƒÙˆÙ† | Ø§Ù„ØªÙ‚Ù†ÙŠØ© | Ø§Ù„Ø¥ØµØ¯Ø§Ø± | Ø§Ù„ØºØ±Ø¶ |
|--------|---------|---------|-------|
| **Backend API** | Go (Golang) | 1.21+ | Ø®Ø§Ø¯Ù… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ |
| **Ø¥Ø·Ø§Ø± Ø§Ù„ÙˆÙŠØ¨** | Gin | 1.9+ | ØªÙˆØ¬ÙŠÙ‡ HTTP ÙˆØ§Ù„ÙˆØ³ÙŠØ· |
| **Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª** | PostgreSQL (Neon) | 15+ | Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ |
| **Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª** | Redis (RedisLabs) | 7.0+ | Ø§Ù„Ø¬Ù„Ø³Ø§Øª ÙˆØ§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª |
| **ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù‡Ø§ØªÙ** | Flutter | 3.16+ | ØªØ·Ø¨ÙŠÙ‚ Ù…ØªØ¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØµØ§Øª |
| **Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…** | React + TypeScript | 18+ | ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© |
| **Ø·Ø¨Ù‚Ø© API** | tRPC | 11+ | Ø§ØªØµØ§Ù„ API Ø¢Ù…Ù† |
| **ORM** | Drizzle ORM + GORM | Ø§Ù„Ø£Ø­Ø¯Ø« | Ù…Ù†Ø´Ø¦ Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª |
| **Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©** | JWT | Ø§Ù„Ø£Ø­Ø¯Ø« | Ù…ØµØ§Ø¯Ù‚Ø© Ø¨Ø§Ù„Ø±Ù…ÙˆØ² |
| **GeoIP** | ip-api.com + MaxMind | Ù…Ø¬Ø§Ù†ÙŠ/Ù…Ø¯ÙÙˆØ¹ | ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø¯ÙˆÙ„Ø© |
| **Ø§Ù„Ù†Ø´Ø±** | Railway | Ø§Ù„Ø£Ø­Ø¯Ø« | Ù…Ù†ØµØ© Ø§Ù„Ù†Ø´Ø± Ø§Ù„Ø³Ø­Ø§Ø¨ÙŠØ© |

### ğŸ“‚ Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹

```
afftok/
â”œâ”€â”€ backend/                    # Go Backend API
â”‚   â”œâ”€â”€ cmd/api/main.go        # Ù†Ù‚Ø·Ø© Ø¯Ø®ÙˆÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
â”‚   â”œâ”€â”€ internal/
â”‚   â”‚   â”œâ”€â”€ handlers/          # Ù…Ø¹Ø§Ù„Ø¬Ø§Øª HTTP
â”‚   â”‚   â”œâ”€â”€ models/            # Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (GORM)
â”‚   â”‚   â”œâ”€â”€ services/          # Ø®Ø¯Ù…Ø§Øª Ù…Ù†Ø·Ù‚ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„
â”‚   â”‚   â”œâ”€â”€ middleware/        # Ø§Ù„ÙˆØ³ÙŠØ· (Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©ØŒ Ø§Ù„Ø£Ù…Ø§Ù†)
â”‚   â”‚   â””â”€â”€ database/          # Ø§ØªØµØ§Ù„ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
â”‚   â””â”€â”€ public/                # Ù‚ÙˆØ§Ù„Ø¨ HTML
â”‚
â”œâ”€â”€ admin/                      # Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… React
â”‚   â”œâ”€â”€ client/src/
â”‚   â”‚   â”œâ”€â”€ pages/             # Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„ØµÙØ­Ø§Øª
â”‚   â”‚   â”œâ”€â”€ components/        # Ù…ÙƒÙˆÙ†Ø§Øª UI
â”‚   â”‚   â””â”€â”€ lib/               # Ø¹Ù…ÙŠÙ„ tRPC
â”‚   â”œâ”€â”€ server/
â”‚   â”‚   â”œâ”€â”€ routers.ts         # Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª tRPC
â”‚   â”‚   â””â”€â”€ db.ts              # Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
â”‚   â””â”€â”€ drizzle/schema.ts      # Ù…Ø®Ø·Ø· Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
â”‚
â”œâ”€â”€ mobile/                     # ØªØ·Ø¨ÙŠÙ‚ Flutter
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ screens/           # Ø´Ø§Ø´Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
â”‚   â”‚   â”œâ”€â”€ models/            # Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
â”‚   â”‚   â”œâ”€â”€ services/          # Ø®Ø¯Ù…Ø§Øª API
â”‚   â”‚   â”œâ”€â”€ providers/         # Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ø§Ù„Ø©
â”‚   â”‚   â””â”€â”€ widgets/           # Ø¹Ù†Ø§ØµØ± Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
â”‚   â”œâ”€â”€ android/               # ÙƒÙˆØ¯ Android
â”‚   â””â”€â”€ ios/                   # ÙƒÙˆØ¯ iOS
â”‚
â”œâ”€â”€ developer-portal/           # Ø§Ù„ØªÙˆØ«ÙŠÙ‚
â”œâ”€â”€ diagrams/                   # Ø±Ø³ÙˆÙ… Ø§Ù„Ù†Ø¸Ø§Ù… (Mermaid)
â””â”€â”€ tests/                      # Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
```

### ğŸ“ˆ Ø§Ù„Ù…Ù‚Ø§ÙŠÙŠØ³ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©

| Ø§Ù„Ù…Ù‚ÙŠØ§Ø³ | Ø§Ù„ÙˆØµÙ | Ø§Ù„Ø­Ø³Ø§Ø¨ |
|---------|-------|--------|
| **Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†** | Ø§Ù„Ù…Ø±ÙˆØ¬ÙŠÙ† Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ† | `COUNT(users)` |
| **Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹Ø±ÙˆØ¶** | Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ù†Ø´Ø·Ø© | `COUNT(offers WHERE status='active')` |
| **Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‚Ø±Ø§Øª** | Ø§Ù„Ù†Ù‚Ø±Ø§Øª Ø§Ù„Ù…ØªØªØ¨Ø¹Ø© | `COUNT(clicks)` |
| **Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª** | Ø§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª Ø§Ù„Ù…Ø¹ØªÙ…Ø¯Ø© | `COUNT(conversions WHERE status='approved')` |
| **Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„ (CR)** | Ù…Ø¹Ø¯Ù„ Ø§Ù„Ù†Ù‚Ø±Ø© Ù„Ù„ØªØ­ÙˆÙŠÙ„ | `(ØªØ­ÙˆÙŠÙ„Ø§Øª / Ù†Ù‚Ø±Ø§Øª) Ã— 100` |
| **Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ Ù„ÙƒÙ„ Ù†Ù‚Ø±Ø© (EPC)** | Ù…ØªÙˆØ³Ø· Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ | `Ø¥Ø¬Ù…Ø§Ù„ÙŠ_Ø§Ù„Ø¹Ù…ÙˆÙ„Ø§Øª / Ø¥Ø¬Ù…Ø§Ù„ÙŠ_Ø§Ù„Ù†Ù‚Ø±Ø§Øª` |
| **Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø§Ø­ØªÙŠØ§Ù„** | Ù†Ø³Ø¨Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ù„ Ø§Ù„Ù…ÙƒØªØ´Ù | `(Ù†Ù‚Ø±Ø§Øª_Ø§Ø­ØªÙŠØ§Ù„ÙŠØ© / Ø¥Ø¬Ù…Ø§Ù„ÙŠ_Ø§Ù„Ù†Ù‚Ø±Ø§Øª) Ã— 100` |

---

## 2. Ù…Ø¹Ù…Ø§Ø±ÙŠØ© Ø§Ù„Ù†Ø¸Ø§Ù…

### ğŸ—ï¸ Ø§Ù„Ù…Ø¹Ù…Ø§Ø±ÙŠØ© Ø§Ù„Ø¹Ø§Ù…Ø©

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           Ø·Ø¨Ù‚Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù‡Ø§ØªÙ      â”‚    Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…      â”‚   ØµÙØ­Ø§Øª Ø§Ù„Ù‡Ø¨ÙˆØ·            â”‚
â”‚   (Flutter)         â”‚    (React + tRPC)   â”‚   (Ù‚ÙˆØ§Ù„Ø¨ HTML)            â”‚
â”‚   iOS & Android     â”‚    Ù†Ø¸Ø§Ù… RBAC       â”‚   Ø§Ù„Ù…Ø±ÙˆØ¬/Ø§Ù„ÙØ±ÙŠÙ‚           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                     â”‚                         â”‚
           â”‚ HTTPS/REST          â”‚ HTTPS/tRPC             â”‚ HTTPS
           â”‚                     â”‚                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Ù…ÙˆØ§Ø²Ù† Ø§Ù„Ø£Ø­Ù…Ø§Ù„ / CDN (Cloudflare)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Ù…Ù†ØµØ© Railway Ø§Ù„Ø³Ø­Ø§Ø¨ÙŠØ©                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                      GO BACKEND API                               â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚   Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©  â”‚ â”‚   Ø§Ù„Ø¹Ø±ÙˆØ¶    â”‚ â”‚   Ø§Ù„Ù†Ù‚Ø±Ø§Øª   â”‚ â”‚ Webhooks   â”‚ â”‚  â”‚
â”‚  â”‚  â”‚   Service   â”‚ â”‚   Service   â”‚ â”‚   Service   â”‚ â”‚  Service   â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚    ÙƒØ´Ù     â”‚ â”‚   GeoIP     â”‚ â”‚   ØªÙˆÙ‚ÙŠØ¹    â”‚ â”‚    Ø³Ø¬Ù„    â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  Ø§Ù„Ø§Ø­ØªÙŠØ§Ù„   â”‚ â”‚   Service   â”‚ â”‚  Ø§Ù„Ø±ÙˆØ§Ø¨Ø·   â”‚ â”‚  Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©  â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚                                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       PostgreSQL (Neon)         â”‚   â”‚        Redis (RedisLabs)        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ â€¢ users                   â”‚  â”‚   â”‚  â”‚ â€¢ ØªØ®Ø²ÙŠÙ† Ø§Ù„Ø¬Ù„Ø³Ø§Øª (15Ø¯)     â”‚  â”‚
â”‚  â”‚ â€¢ offers                  â”‚  â”‚   â”‚  â”‚ â€¢ Ø­Ø§Ø¬Ø² Ø§Ù„Ù†Ù‚Ø±Ø§Øª (10Ø«)      â”‚  â”‚
â”‚  â”‚ â€¢ clicks                  â”‚  â”‚   â”‚  â”‚ â€¢ ØªØ®Ø²ÙŠÙ† GeoIP (24Ø³)       â”‚  â”‚
â”‚  â”‚ â€¢ conversions             â”‚  â”‚   â”‚  â”‚ â€¢ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ø¹Ø¯Ù„            â”‚  â”‚
â”‚  â”‚ â€¢ teams                   â”‚  â”‚   â”‚  â”‚ â€¢ Ø±Ø¨Ø· Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„ØªØªØ¨Ø¹        â”‚  â”‚
â”‚  â”‚ â€¢ admin_users             â”‚  â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”‚ â€¢ audit_logs              â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  â”‚ â€¢ advertiser_integrations â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ”„ ØªØ¯ÙÙ‚ Ø§Ù„Ø·Ù„Ø¨

```
Ø·Ù„Ø¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… â†’ Cloudflare CDN â†’ Ù…ÙˆØ§Ø²Ù† Ø£Ø­Ù…Ø§Ù„ Railway â†’ Go Backend
                                                            â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                    â”‚                                       â”‚
                    â–¼                                       â–¼
            Ù…Ø­Ø¯Ø¯ Ø§Ù„Ù…Ø¹Ø¯Ù„                               ÙˆØ³ÙŠØ· Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©
                    â”‚                                       â”‚
                    â–¼                                       â–¼
            ØªØ±ÙˆÙŠØ³Ø§Øª Ø§Ù„Ø£Ù…Ø§Ù†                          Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† JWT
                    â”‚                                       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â–¼
                                   Ø·Ø¨Ù‚Ø© Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬
                                        â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                   â”‚                   â”‚
                    â–¼                   â–¼                   â–¼
              Ø·Ø¨Ù‚Ø© Ø§Ù„Ø®Ø¯Ù…Ø©      ØªØ®Ø²ÙŠÙ† Redis Ø§Ù„Ù…Ø¤Ù‚Øª      PostgreSQL
                    â”‚                   â”‚                   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â–¼
                                   Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©
```

### ğŸ“Š ØªØ¯ÙÙ‚ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: ØªØªØ¨Ø¹ Ø§Ù„Ù†Ù‚Ø±Ø§Øª

```
1. Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠÙ†Ù‚Ø±: https://go.afftokapp.com/c/ABC123
                            â”‚
                            â–¼
2. â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚                    ÙƒØ´Ù Ø§Ù„Ø§Ø­ØªÙŠØ§Ù„                              â”‚
   â”‚  â€¢ ÙƒØ´Ù Ø§Ù„Ø±ÙˆØ¨ÙˆØªØ§Øª (ØªØ­Ù„ÙŠÙ„ User-Agent)                         â”‚
   â”‚  â€¢ Ø¨ØµÙ…Ø© IP (ÙƒØ´Ù Ù…Ø±Ø§ÙƒØ² Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª)                             â”‚
   â”‚  â€¢ ÙƒØ´Ù Ø­Ø´Ùˆ Ø§Ù„ÙƒÙˆÙƒÙŠØ²                                          â”‚
   â”‚  â€¢ ÙƒØ´Ù Ø´Ø°ÙˆØ° Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ù†Ù‚Ø±                                     â”‚
   â”‚  â€¢ ÙƒØ´Ù Ø§Ù†ØªØ­Ø§Ù„ Ø§Ù„Ù…ÙØ­ÙŠÙ„                                       â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
3. â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚                    ØªØ­Ø¯ÙŠØ¯ GeoIP                               â”‚
   â”‚  Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©: CF-IPCountry â†’ X-Country â†’ ip-api.com â†’ MaxMind  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
4. â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚                  ÙØ­Øµ Ø§Ù„Ø§Ø³ØªÙ‡Ø¯Ø§Ù Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ                      â”‚
   â”‚  â€¢ Ù‡Ù„ Ø§Ù„Ø¯ÙˆÙ„Ø© ÙÙŠ target_countriesØŸ âœ“                         â”‚
   â”‚  â€¢ Ù‡Ù„ Ø§Ù„Ø¯ÙˆÙ„Ø© ÙÙŠ blocked_countriesØŸ âœ—                        â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚                         â”‚
          Ù†Ù‚Ø±Ø© ØµØ§Ù„Ø­Ø©               Ù†Ù‚Ø±Ø© Ù…Ø­Ø¸ÙˆØ±Ø©
               â”‚                         â”‚
               â–¼                         â–¼
   ØªØ®Ø²ÙŠÙ† ÙÙŠ Ø­Ø§Ø¬Ø² Redis           Ø¥Ø±Ø¬Ø§Ø¹ 403 Forbidden
               â”‚
               â–¼
   ÙƒØªØ§Ø¨Ø© Ø¯ÙØ¹ÙŠØ© Ù„Ù€ PostgreSQL (ÙƒÙ„ 10 Ø«ÙˆØ§Ù†ÙŠ)
               â”‚
               â–¼
   Ø¥Ø¹Ø§Ø¯Ø© ØªÙˆØ¬ÙŠÙ‡ 302 Ù„Ù€ URL Ø§Ù„Ø¹Ø±Ø¶
               â”‚
               â–¼
   Ø¥Ø·Ù„Ø§Ù‚ Webhook Ù„Ù„Ù…Ø¹Ù„Ù† (ØºÙŠØ± Ù…ØªØ²Ø§Ù…Ù†)
```

---

## 3. ØªØµÙ…ÙŠÙ… Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

### ğŸ“Š Ù…Ø®Ø·Ø· Ø¹Ù„Ø§Ù‚Ø§Øª Ø§Ù„ÙƒÙŠØ§Ù†Ø§Øª

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      users       â”‚       â”‚     networks     â”‚       â”‚      offers      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)          â”‚       â”‚ id (PK)          â”‚       â”‚ id (PK)          â”‚
â”‚ username         â”‚       â”‚ name             â”‚       â”‚ network_id (FK)  â”‚
â”‚ email            â”‚       â”‚ description      â”‚       â”‚ title            â”‚
â”‚ password_hash    â”‚       â”‚ logo_url         â”‚       â”‚ title_ar         â”‚
â”‚ role             â”‚       â”‚ status           â”‚       â”‚ description      â”‚
â”‚ country          â”‚       â”‚ created_at       â”‚       â”‚ payout           â”‚
â”‚ audience_countriesâ”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚ target_countries â”‚
â”‚ unique_code      â”‚                â”‚                 â”‚ blocked_countriesâ”‚
â”‚ points           â”‚                â”‚                 â”‚ status           â”‚
â”‚ level            â”‚                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ created_at       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                                     â”‚
         â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
         â”‚         â”‚   user_offers    â”‚                       â”‚
         â”‚         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ id (PK)          â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚ user_id (FK)     â”‚
                   â”‚ offer_id (FK)    â”‚
                   â”‚ tracking_url     â”‚
                   â”‚ created_at       â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                                     â”‚
         â–¼                                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      clicks      â”‚                 â”‚   conversions    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)          â”‚                 â”‚ id (PK)          â”‚
â”‚ user_id (FK)     â”‚                 â”‚ click_id (FK)    â”‚
â”‚ offer_id (FK)    â”‚                 â”‚ user_id (FK)     â”‚
â”‚ user_offer_id(FK)â”‚                 â”‚ offer_id (FK)    â”‚
â”‚ tracking_code    â”‚                 â”‚ amount           â”‚
â”‚ ip_address       â”‚                 â”‚ commission       â”‚
â”‚ country          â”‚                 â”‚ transaction_id   â”‚
â”‚ fraud_score      â”‚                 â”‚ status           â”‚
â”‚ clicked_at       â”‚                 â”‚ converted_at     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“‹ Ù…Ø®Ø·Ø· Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©

#### users (Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†)
```sql
CREATE TABLE users (
  id SERIAL PRIMARY KEY,
  username VARCHAR(50) UNIQUE NOT NULL,
  email VARCHAR(320) UNIQUE NOT NULL,
  password_hash VARCHAR(255) NOT NULL,
  full_name VARCHAR(100),
  role VARCHAR(20) DEFAULT 'promoter' CHECK (role IN ('promoter', 'advertiser', 'admin')),
  status VARCHAR(20) DEFAULT 'active' CHECK (status IN ('active', 'inactive', 'banned')),
  points INTEGER DEFAULT 0,
  level INTEGER DEFAULT 1,
  total_earnings DECIMAL(12, 2) DEFAULT 0.00,
  country VARCHAR(2),
  audience_countries TEXT[],
  unique_code VARCHAR(50) UNIQUE,
  team_id INTEGER REFERENCES teams(id),
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  last_login TIMESTAMP WITH TIME ZONE,
  
  -- Ø§Ù„ÙÙ‡Ø§Ø±Ø³
  INDEX idx_users_email (email),
  INDEX idx_users_username (username),
  INDEX idx_users_unique_code (unique_code),
  INDEX idx_users_country (country)
);
```

#### offers (Ø§Ù„Ø¹Ø±ÙˆØ¶)
```sql
CREATE TABLE offers (
  id SERIAL PRIMARY KEY,
  network_id INTEGER REFERENCES networks(id) ON DELETE CASCADE,
  
  -- Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
  title VARCHAR(200) NOT NULL,
  title_ar VARCHAR(200),
  description TEXT,
  description_ar TEXT,
  category VARCHAR(50),
  
  -- Ø§Ù„Ù…Ø§Ù„ÙŠØ©
  payout DECIMAL(10, 2) NOT NULL,
  payout_type VARCHAR(20) DEFAULT 'cpa' CHECK (payout_type IN ('cpa', 'cpl', 'cps', 'hybrid')),
  
  -- Ø§Ù„ÙˆØ³Ø§Ø¦Ø·
  logo_url VARCHAR(500),
  destination_url VARCHAR(1000) NOT NULL,
  
  -- Ø§Ù„Ø§Ø³ØªÙ‡Ø¯Ø§Ù
  target_countries TEXT[],
  blocked_countries TEXT[],
  
  -- Ø§Ù„Ø´Ø±ÙˆØ·
  terms TEXT,
  additional_notes TEXT,
  
  -- Ø§Ù„Ø­Ø§Ù„Ø©
  status VARCHAR(20) DEFAULT 'pending' CHECK (status IN ('active', 'inactive', 'pending', 'archived')),
  
  -- Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª (Ù…Ù†Ø²ÙˆØ¹Ø© Ø§Ù„ØªØ·Ø¨ÙŠØ¹ Ù„Ù„Ø£Ø¯Ø§Ø¡)
  total_clicks INTEGER DEFAULT 0,
  total_conversions INTEGER DEFAULT 0,
  
  -- Ø§Ù„Ø·ÙˆØ§Ø¨Ø¹ Ø§Ù„Ø²Ù…Ù†ÙŠØ©
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  
  -- Ø§Ù„ÙÙ‡Ø§Ø±Ø³
  INDEX idx_offers_network (network_id),
  INDEX idx_offers_status (status),
  INDEX idx_offers_category (category),
  INDEX idx_offers_target_countries USING GIN (target_countries)
);
```

#### clicks (Ø§Ù„Ù†Ù‚Ø±Ø§Øª)
```sql
CREATE TABLE clicks (
  id SERIAL PRIMARY KEY,
  user_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE,
  offer_id INTEGER NOT NULL REFERENCES offers(id) ON DELETE CASCADE,
  user_offer_id INTEGER REFERENCES user_offers(id),
  
  -- Ø§Ù„ØªØªØ¨Ø¹
  tracking_code VARCHAR(50) UNIQUE NOT NULL,
  
  -- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø²Ø§Ø¦Ø±
  ip_address VARCHAR(45),
  user_agent TEXT,
  referrer VARCHAR(1000),
  country VARCHAR(2),
  
  -- ÙƒØ´Ù Ø§Ù„Ø§Ø­ØªÙŠØ§Ù„
  fraud_score DECIMAL(3, 2) DEFAULT 0.00,
  fraud_reasons TEXT[],
  is_valid BOOLEAN DEFAULT TRUE,
  
  -- Ø§Ù„Ø·ÙˆØ§Ø¨Ø¹ Ø§Ù„Ø²Ù…Ù†ÙŠØ©
  clicked_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  
  -- Ø§Ù„ÙÙ‡Ø§Ø±Ø³
  INDEX idx_clicks_user (user_id),
  INDEX idx_clicks_offer (offer_id),
  INDEX idx_clicks_tracking_code (tracking_code),
  INDEX idx_clicks_clicked_at (clicked_at),
  INDEX idx_clicks_country (country),
  INDEX idx_clicks_valid (is_valid)
);
```

#### conversions (Ø§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª)
```sql
CREATE TABLE conversions (
  id SERIAL PRIMARY KEY,
  click_id INTEGER REFERENCES clicks(id),
  user_id INTEGER NOT NULL REFERENCES users(id),
  offer_id INTEGER NOT NULL REFERENCES offers(id),
  
  -- Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©
  amount DECIMAL(12, 2) NOT NULL,
  commission DECIMAL(12, 2) NOT NULL,
  currency VARCHAR(3) DEFAULT 'USD',
  transaction_id VARCHAR(100) UNIQUE,
  
  -- Ø§Ù„Ø­Ø§Ù„Ø©
  status VARCHAR(20) DEFAULT 'pending' CHECK (status IN ('pending', 'approved', 'rejected', 'reversed')),
  rejection_reason TEXT,
  
  -- Ø§Ù„Ø·ÙˆØ§Ø¨Ø¹ Ø§Ù„Ø²Ù…Ù†ÙŠØ©
  converted_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  approved_at TIMESTAMP WITH TIME ZONE,
  
  -- Ø§Ù„ÙÙ‡Ø§Ø±Ø³
  INDEX idx_conversions_user (user_id),
  INDEX idx_conversions_offer (offer_id),
  INDEX idx_conversions_status (status),
  INDEX idx_conversions_transaction (transaction_id),
  INDEX idx_conversions_converted_at (converted_at)
);
```

#### admin_users (Ù…Ø³ØªØ®Ø¯Ù…ÙŠ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© - RBAC)
```sql
CREATE TABLE admin_users (
  id SERIAL PRIMARY KEY,
  email VARCHAR(320) UNIQUE NOT NULL,
  username VARCHAR(50) NOT NULL,
  password_hash VARCHAR(255) NOT NULL,
  role VARCHAR(30) NOT NULL CHECK (role IN (
    'super_admin', 
    'finance_admin', 
    'tech_admin', 
    'advertiser_manager', 
    'promoter_support', 
    'fraud_reviewer'
  )),
  is_active BOOLEAN DEFAULT TRUE,
  last_login TIMESTAMP WITH TIME ZONE,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  
  INDEX idx_admin_users_email (email),
  INDEX idx_admin_users_role (role)
);
```

#### audit_logs (Ø³Ø¬Ù„ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©)
```sql
CREATE TABLE audit_logs (
  id SERIAL PRIMARY KEY,
  admin_user_id INTEGER REFERENCES admin_users(id),
  
  -- ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡
  action VARCHAR(100) NOT NULL,
  entity_type VARCHAR(50),
  entity_id INTEGER,
  
  -- ØªØªØ¨Ø¹ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª
  old_value JSONB,
  new_value JSONB,
  
  -- Ø§Ù„Ø³ÙŠØ§Ù‚
  ip_address VARCHAR(45),
  user_agent TEXT,
  
  -- Ø§Ù„Ø·Ø§Ø¨Ø¹ Ø§Ù„Ø²Ù…Ù†ÙŠ
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  
  -- Ø§Ù„ÙÙ‡Ø§Ø±Ø³
  INDEX idx_audit_logs_admin (admin_user_id),
  INDEX idx_audit_logs_action (action),
  INDEX idx_audit_logs_entity (entity_type, entity_id),
  INDEX idx_audit_logs_created_at (created_at)
);
```

---

## 4. ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª

### ğŸ” Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©

#### POST /api/auth/register

ØªØ³Ø¬ÙŠÙ„ Ø­Ø³Ø§Ø¨ Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯.

**Ø§Ù„Ø·Ù„Ø¨:**
```json
{
  "username": "ahmed_ali",
  "email": "ahmed@example.com",
  "password": "SecurePass123!",
  "full_name": "Ø£Ø­Ù…Ø¯ Ø¹Ù„ÙŠ",
  "role": "promoter",
  "country": "SA"
}
```

**Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø© (201 Created):**
```json
{
  "success": true,
  "data": {
    "user": {
      "id": 123,
      "username": "ahmed_ali",
      "email": "ahmed@example.com",
      "role": "promoter",
      "unique_code": "usr_abc123xyz"
    },
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "expires_at": "2025-12-15T10:30:00Z"
  }
}
```

**Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„ØªØ­Ù‚Ù‚:**
| Ø§Ù„Ø­Ù‚Ù„ | Ø§Ù„Ù‚ÙˆØ§Ø¹Ø¯ |
|-------|---------|
| username | 3-50 Ø­Ø±ÙØŒ Ø£Ø¨Ø¬Ø¯ÙŠ Ø±Ù‚Ù…ÙŠØŒ ÙØ±ÙŠØ¯ |
| email | ØµÙŠØºØ© Ø¨Ø±ÙŠØ¯ ØµØ§Ù„Ø­Ø©ØŒ ÙØ±ÙŠØ¯ |
| password | 8 Ø£Ø­Ø±Ù ÙƒØ­Ø¯ Ø£Ø¯Ù†Ù‰ØŒ Ø­Ø±Ù ÙƒØ¨ÙŠØ±ØŒ Ø±Ù‚Ù… |
| role | `promoter` Ø£Ùˆ `advertiser` |
| country | Ø±Ù…Ø² ISO 3166-1 alpha-2 |

#### POST /api/auth/login

**Ø§Ù„Ø·Ù„Ø¨:**
```json
{
  "email": "ahmed@example.com",
  "password": "SecurePass123!"
}
```

**Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø© (200 OK):**
```json
{
  "success": true,
  "data": {
    "user": {
      "id": 123,
      "username": "ahmed_ali",
      "email": "ahmed@example.com",
      "role": "promoter",
      "points": 1500,
      "level": 5,
      "country": "SA",
      "audience_countries": ["SA", "AE", "KW"]
    },
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "refresh_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "expires_at": "2025-12-08T11:00:00Z"
  }
}
```

### ğŸ¯ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¹Ø±ÙˆØ¶

#### GET /api/offers

Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ø±ÙˆØ¶ Ù…Ø¹ Ø§Ù„ØªØµÙÙŠØ© ÙˆØªØ±Ù‚ÙŠÙ… Ø§Ù„ØµÙØ­Ø§Øª.

**Ù…Ø¹Ù„Ù…Ø§Øª Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…:**
| Ø§Ù„Ù…Ø¹Ù„Ù…Ø© | Ø§Ù„Ù†ÙˆØ¹ | Ø§Ù„ÙˆØµÙ |
|---------|------|-------|
| `page` | int | Ø±Ù‚Ù… Ø§Ù„ØµÙØ­Ø© (Ø§ÙØªØ±Ø§Ø¶ÙŠ: 1) |
| `limit` | int | Ø§Ù„Ø¹Ù†Ø§ØµØ± Ù„ÙƒÙ„ ØµÙØ­Ø© (Ø§ÙØªØ±Ø§Ø¶ÙŠ: 20ØŒ Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰: 100) |
| `status` | string | ØªØµÙÙŠØ© Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ù„Ø© |
| `category` | string | ØªØµÙÙŠØ© Ø­Ø³Ø¨ Ø§Ù„ÙØ¦Ø© |
| `country` | string | ØªØµÙÙŠØ© Ø­Ø³Ø¨ Ø§Ù„Ø¯ÙˆÙ„Ø© Ø§Ù„Ù…Ø³ØªÙ‡Ø¯ÙØ© |
| `sort` | string | Ø­Ù‚Ù„ Ø§Ù„ØªØ±ØªÙŠØ¨ (created_atØŒ payout) |
| `order` | string | ØªØ±ØªÙŠØ¨ Ø§Ù„ÙØ±Ø² (ascØŒ desc) |

**Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©:**
```json
{
  "success": true,
  "data": {
    "offers": [
      {
        "id": 1,
        "title": "Amazon Prime Membership",
        "title_ar": "Ø¹Ø¶ÙˆÙŠØ© Ø£Ù…Ø§Ø²ÙˆÙ† Ø¨Ø±Ø§ÙŠÙ…",
        "payout": 15.00,
        "payout_type": "cpa",
        "category": "subscription",
        "target_countries": ["SA", "AE"],
        "status": "active",
        "stats": {
          "clicks": 5420,
          "conversions": 187,
          "conversion_rate": 3.45
        }
      }
    ],
    "pagination": {
      "page": 1,
      "limit": 20,
      "total": 150,
      "total_pages": 8,
      "has_next": true,
      "has_prev": false
    }
  }
}
```

#### POST /api/offers/:id/join

Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù… Ù„Ø¹Ø±Ø¶ ÙˆØ§Ø³ØªÙ„Ø§Ù… Ø±Ø§Ø¨Ø· Ø§Ù„ØªØªØ¨Ø¹.

**Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©:**
```json
{
  "success": true,
  "data": {
    "user_offer_id": 456,
    "tracking_url": "https://go.afftokapp.com/c/xK9mN2pQ",
    "short_link": "https://go.afftokapp.com/c/xK9mN2pQ",
    "qr_code": "data:image/png;base64,..."
  }
}
```

### ğŸ“Š ØªØªØ¨Ø¹ Ø§Ù„Ù†Ù‚Ø±Ø§Øª

#### GET /c/:code

ØªØªØ¨Ø¹ Ø§Ù„Ù†Ù‚Ø±Ø© ÙˆØ¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙˆØ¬ÙŠÙ‡.

**Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©:**
| Ø§Ù„ÙƒÙˆØ¯ | Ø§Ù„ÙˆØµÙ |
|-------|-------|
| 302 | Ù†Ø¬Ø§Ø­ - Ø¥Ø¹Ø§Ø¯Ø© ØªÙˆØ¬ÙŠÙ‡ Ù„Ù€ URL Ø§Ù„Ø¹Ø±Ø¶ |
| 403 | Ù…Ø­Ø¸ÙˆØ± - Ø§Ù„Ø¯ÙˆÙ„Ø© ØºÙŠØ± Ù…Ø³Ù…ÙˆØ­Ø© |
| 404 | ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ - ÙƒÙˆØ¯ ØªØªØ¨Ø¹ ØºÙŠØ± ØµØ§Ù„Ø­ |
| 410 | Ø§Ù†ØªÙ‡Ù‰ - Ø§Ù„Ø¹Ø±Ø¶ Ù„Ù… ÙŠØ¹Ø¯ Ù†Ø´Ø·Ø§Ù‹ |
| 429 | Ø·Ù„Ø¨Ø§Øª ÙƒØ«ÙŠØ±Ø© - ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ø¹Ø¯Ù„ |

### ğŸ”” Webhooks/Postbacks

#### POST /api/postback

Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„ØªØ­ÙˆÙŠÙ„.

**Ø§Ù„Ø·Ù„Ø¨:**
```json
{
  "click_id": "xK9mN2pQ",
  "transaction_id": "TXN-2025-001234",
  "amount": 299.99,
  "currency": "SAR",
  "status": "approved",
  "customer_type": "new",
  "timestamp": "2025-12-08T10:30:00Z",
  "signature": "a1b2c3d4e5f6..."
}
```

**Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªÙˆÙ‚ÙŠØ¹:**
```go
// ØªÙˆÙ‚ÙŠØ¹ HMAC-SHA256
expectedSig := hmac.New(sha256.New, []byte(secretKey))
expectedSig.Write([]byte(click_id + transaction_id + amount))
isValid := hmac.Equal(signature, expectedSig.Sum(nil))
```

**Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©:**
```json
{
  "success": true,
  "data": {
    "conversion_id": 789,
    "commission": 29.99,
    "status": "pending"
  }
}
```

---

## 5. Ø®Ø¯Ù…Ø© ØªØªØ¨Ø¹ Ø§Ù„Ù†Ù‚Ø±Ø§Øª

### ğŸš€ Ø§Ù„Ù…Ø¹Ù…Ø§Ø±ÙŠØ©

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Ø®Ø¯Ù…Ø© ØªØªØ¨Ø¹ Ø§Ù„Ù†Ù‚Ø±Ø§Øª                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚  â”‚   Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚   Ø­Ø§Ø¬Ø²     â”‚                       â”‚
â”‚  â”‚   Layer     â”‚         â”‚   Redis    â”‚                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚         â”‚                       â”‚                               â”‚
â”‚         â”‚                       â”‚ Ø¯ÙØ¹ÙŠ (10Ø«)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚  â”‚    ÙƒØ´Ù     â”‚         â”‚ PostgreSQL  â”‚                       â”‚
â”‚  â”‚  Ø§Ù„Ø§Ø­ØªÙŠØ§Ù„   â”‚         â”‚  Database   â”‚                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“ˆ Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ø£Ø¯Ø§Ø¡

| Ø§Ù„Ù…Ù‚ÙŠØ§Ø³ | Ø§Ù„Ù‚ÙŠÙ…Ø© | Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª |
|---------|--------|----------|
| **Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©** | 10,000 Ø·Ù„Ø¨/Ø« | Ù„ÙƒÙ„ Ù…Ø«ÙŠÙ„ |
| **Ø²Ù…Ù† Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø© (p50)** | 2ms | Ø¸Ø±ÙˆÙ Ø¹Ø§Ø¯ÙŠØ© |
| **Ø²Ù…Ù† Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø© (p95)** | 8ms | ØªØ­Øª Ø§Ù„Ø­Ù…Ù„ |
| **Ø²Ù…Ù† Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø© (p99)** | 15ms | Ø°Ø±ÙˆØ© Ø§Ù„Ø­Ø±ÙƒØ© |
| **ÙƒØªØ§Ø¨Ø© Redis** | <1ms | Ù…Ø®Ø²Ù†Ø© Ù…Ø¤Ù‚ØªØ§Ù‹ |
| **ÙƒØªØ§Ø¨Ø© DB Ø¯ÙØ¹ÙŠØ©** | ~50ms | ÙƒÙ„ 10 Ø«ÙˆØ§Ù†ÙŠ |

### ğŸ”’ ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· (HMAC)

```go
// Ø¥Ù†Ø´Ø§Ø¡ ÙƒÙˆØ¯ ØªØªØ¨Ø¹ Ù…ÙˆÙ‚Ø¹
func GenerateTrackingCode(userOfferID uint) string {
    timestamp := time.Now().Unix()
    data := fmt.Sprintf("%d:%d", userOfferID, timestamp)
    
    mac := hmac.New(sha256.New, []byte(secretKey))
    mac.Write([]byte(data))
    signature := hex.EncodeToString(mac.Sum(nil))[:12]
    
    // ØªØ®Ø²ÙŠÙ† Ø§Ù„Ø±Ø¨Ø· ÙÙŠ Redis
    redis.Set(ctx, "track:"+signature, userOfferID, 90*24*time.Hour)
    
    return signature
}

// Ø§Ù„ØªØ­Ù‚Ù‚ ÙˆÙÙƒ ØªØ´ÙÙŠØ± ÙƒÙˆØ¯ Ø§Ù„ØªØªØ¨Ø¹
func DecodeTrackingCode(code string) (uint, error) {
    userOfferID, err := redis.Get(ctx, "track:"+code).Uint64()
    if err != nil {
        return 0, ErrInvalidTrackingCode
    }
    return uint(userOfferID), nil
}
```

---

## 6. ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù‡Ø§ØªÙ Ø§Ù„Ù…Ø­Ù…ÙˆÙ„

### ğŸ“± Ù…Ø¹Ù…Ø§Ø±ÙŠØ© Flutter

```
lib/
â”œâ”€â”€ main.dart                 # Ù†Ù‚Ø·Ø© Ø¯Ø®ÙˆÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ env.dart             # Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ¦Ø©
â”‚   â”œâ”€â”€ routes.dart          # ØªØ¹Ø±ÙŠÙØ§Øª Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª
â”‚   â””â”€â”€ theme.dart           # Ø³Ù…Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ user.dart            # Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
â”‚   â”œâ”€â”€ offer.dart           # Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø¹Ø±Ø¶
â”‚   â””â”€â”€ user_offer.dart      # Ù†Ù…ÙˆØ°Ø¬ Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
â”œâ”€â”€ providers/
â”‚   â”œâ”€â”€ auth_provider.dart   # Ø­Ø§Ù„Ø© Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©
â”‚   â”œâ”€â”€ offer_provider.dart  # Ø­Ø§Ù„Ø© Ø§Ù„Ø¹Ø±ÙˆØ¶
â”‚   â””â”€â”€ theme_provider.dart  # Ø­Ø§Ù„Ø© Ø§Ù„Ø³Ù…Ø©
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ api_service.dart     # Ø¹Ù…ÙŠÙ„ HTTP
â”‚   â”œâ”€â”€ auth_service.dart    # Ø§Ø³ØªØ¯Ø¹Ø§Ø¡Ø§Øª API Ù„Ù„Ù…ØµØ§Ø¯Ù‚Ø©
â”‚   â””â”€â”€ storage_service.dart # Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ø¢Ù…Ù†
â”œâ”€â”€ screens/
â”‚   â”œâ”€â”€ splash_screen.dart   # ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
â”‚   â”œâ”€â”€ auth/                # ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ØŒ Ø§Ù„ØªØ³Ø¬ÙŠÙ„
â”‚   â”œâ”€â”€ home/                # Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
â”‚   â”œâ”€â”€ offers/              # Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ø±ÙˆØ¶
â”‚   â”œâ”€â”€ profile/             # Ù…Ù„Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
â”‚   â””â”€â”€ settings/            # Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
â””â”€â”€ widgets/
    â”œâ”€â”€ offer_card.dart      # Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø¹Ø±Ø¶
    â””â”€â”€ loading_indicator.dart
```

### ğŸ” ØªØ¯ÙÙ‚ Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©

```dart
class AuthService {
  final FlutterSecureStorage _storage = FlutterSecureStorage();
  
  Future<AuthResponse> login(String email, String password) async {
    final response = await _api.post('/auth/login', {
      'email': email,
      'password': password,
    });
    
    // ØªØ®Ø²ÙŠÙ† Ø§Ù„Ø±Ù…ÙˆØ² Ø¨Ø£Ù…Ø§Ù†
    await _storage.write(key: 'access_token', value: response.token);
    await _storage.write(key: 'refresh_token', value: response.refreshToken);
    
    return response;
  }
  
  Future<void> logout() async {
    await _storage.deleteAll();
    // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
  }
  
  Future<String?> getToken() async {
    final token = await _storage.read(key: 'access_token');
    if (token == null) return null;
    
    // ÙØ­Øµ Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡
    if (isTokenExpired(token)) {
      return await _refreshToken();
    }
    return token;
  }
}
```

### ğŸ“¤ ÙˆØ¸ÙŠÙØ© Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©

```dart
void shareTrackingLink(UserOffer offer) async {
  final trackingUrl = offer.trackingUrl ?? offer.userReferralLink;
  
  await Share.share(
    'ğŸ”¥ Ø´Ø§Ù‡Ø¯ Ù‡Ø°Ø§ Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø°Ù‡Ù„!\n\n'
    '${offer.title}\n'
    'ğŸ’° Ø§ÙƒØ³Ø¨ Ù…ÙƒØ§ÙØ¢Øª Ø¹Ù†Ø¯ Ø§Ù„ØªØ³Ø¬ÙŠÙ„!\n\n'
    'ğŸ‘‰ $trackingUrl',
    subject: offer.title,
  );
  
  // ØªØªØ¨Ø¹ Ø­Ø¯Ø« Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©
  analytics.logEvent('offer_shared', {
    'offer_id': offer.offerId,
    'method': 'native_share',
  });
}
```

---

## 7. Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ©

### ğŸ–¥ï¸ ØªÙ†ÙÙŠØ° RBAC

```typescript
// Ù…ØµÙÙˆÙØ© ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ø£Ø¯ÙˆØ§Ø±
const ROLE_PERMISSIONS = {
  super_admin: ['*'],
  finance_admin: ['dashboard', 'invoices', 'analytics.revenue', 'offers.view', 'contests.view'],
  tech_admin: ['dashboard', 'monitoring', 'logs', 'webhooks', 'fraud_detection', 'geo_rules'],
  advertiser_manager: ['dashboard', 'offers', 'networks', 'teams', 'contests', 'badges', 'analytics.basic'],
  promoter_support: ['dashboard', 'users', 'teams.view', 'contests.view'],
  fraud_reviewer: ['fraud_detection', 'geo_rules', 'logs.view'],
};

// Ø®Ø·Ø§Ù ÙØ­Øµ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©
function usePermission(permission: string): boolean {
  const { user } = useAuth();
  
  if (!user) return false;
  if (user.role === 'super_admin') return true;
  
  const permissions = ROLE_PERMISSIONS[user.role] || [];
  return permissions.includes(permission) || permissions.includes('*');
}

// Ù…ÙƒÙˆÙ† Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„Ù…Ø­Ù…ÙŠ
function ProtectedRoute({ permission, children }) {
  const hasPermission = usePermission(permission);
  
  if (!hasPermission) {
    return <AccessDenied />;
  }
  
  return children;
}
```

---

## 8. Ø¨ÙˆØ§Ø¨Ø© ØªÙƒØ§Ù…Ù„ Ø§Ù„Ù…Ø¹Ù„Ù†ÙŠÙ†

### ğŸ”— Ø·Ø±Ù‚ Ø§Ù„ØªÙƒØ§Ù…Ù„

#### 1. ØªÙƒØ§Ù…Ù„ Shopify

```javascript
// Ù…Ø¹Ø§Ù„Ø¬ Shopify webhook
app.post('/api/webhooks/shopify/:advertiserId', async (req, res) => {
  const { advertiserId } = req.params;
  const hmac = req.headers['x-shopify-hmac-sha256'];
  
  // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªÙˆÙ‚ÙŠØ¹ webhook
  const isValid = verifyShopifySignature(req.body, hmac, shopifySecret);
  if (!isValid) {
    return res.status(401).json({ error: 'ØªÙˆÙ‚ÙŠØ¹ ØºÙŠØ± ØµØ§Ù„Ø­' });
  }
  
  const order = req.body;
  
  // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù†Ù‚Ø±Ø© Ø¨Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù„Ù„Ø¹Ù…ÙŠÙ„
  const click = await findClickByCustomer(order.customer.email);
  if (!click) {
    return res.status(200).json({ message: 'Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù†Ù‚Ø±Ø© ØªØ§Ø¨Ø¹Ø©' });
  }
  
  // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªØ­ÙˆÙŠÙ„
  await createConversion({
    clickId: click.id,
    transactionId: order.id.toString(),
    amount: parseFloat(order.total_price),
    currency: order.currency,
  });
  
  res.status(200).json({ success: true });
});
```

#### 2. ØªÙƒØ§Ù…Ù„ Ø³Ù„Ø©

```javascript
// Ù…Ø¹Ø§Ù„Ø¬ Salla webhook
app.post('/api/webhooks/salla/:advertiserId', async (req, res) => {
  const { event, data } = req.body;
  
  if (event !== 'order.created' && event !== 'order.paid') {
    return res.status(200).json({ message: 'ØªÙ… ØªØ¬Ø§Ù‡Ù„ Ø§Ù„Ø­Ø¯Ø«' });
  }
  
  // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø·Ù„Ø¨
  await processConversion({
    platform: 'salla',
    orderId: data.id,
    amount: data.total.amount,
    currency: data.total.currency,
  });
  
  res.status(200).json({ success: true });
});
```

#### 3. ØªÙƒØ§Ù…Ù„ Pixel Ø§Ù„Ù…Ø®ØµØµ

```html
<!-- ÙƒÙˆØ¯ AffTok Pixel -->
<script>
(function(w,d,s,o,f,js,fjs){
  w['AffTokObject']=o;w[o]=w[o]||function(){(w[o].q=w[o].q||[]).push(arguments)};
  w[o].l=1*new Date();js=d.createElement(s);fjs=d.getElementsByTagName(s)[0];
  js.id=o;js.src=f;js.async=1;fjs.parentNode.insertBefore(js,fjs);
})(window,document,'script','afftok','https://go.afftokapp.com/pixel.js');

afftok('init', 'ADV_123456');
afftok('track', 'PageView');
</script>

<!-- ØªØªØ¨Ø¹ Ø§Ù„ØªØ­ÙˆÙŠÙ„ ÙÙŠ ØµÙØ­Ø© Ø§Ù„Ø´ÙƒØ± -->
<script>
afftok('track', 'Purchase', {
  transaction_id: 'ORDER_123',
  amount: 99.99,
  currency: 'SAR'
});
</script>
```

### ğŸ“‹ Ù‡ÙŠÙƒÙ„ Postback URL

```
https://go.afftokapp.com/api/postback
  ?click_id={click_id}
  &transaction_id={order_id}
  &amount={total_amount}
  &currency={currency}
  &status=approved
  &sig={hmac_signature}
```

---

## 9. Ø§Ù„Ø£Ù…Ø§Ù† ÙˆÙƒØ´Ù Ø§Ù„Ø§Ø­ØªÙŠØ§Ù„

### ğŸ›¡ï¸ ÙƒØ´Ù Ø§Ù„Ø§Ø­ØªÙŠØ§Ù„ Ù…ØªØ¹Ø¯Ø¯ Ø§Ù„Ø·Ø¨Ù‚Ø§Øª

```go
type FraudDetector struct {
    botPatterns      []string
    datacenterRanges []*net.IPNet
    cache            *cache.Cache
}

func (f *FraudDetector) AnalyzeClick(ctx context.Context, click *Click) FraudResult {
    var score float64
    var reasons []string
    
    // Ø§Ù„Ø·Ø¨Ù‚Ø© 1: ÙƒØ´Ù Ø§Ù„Ø±ÙˆØ¨ÙˆØªØ§Øª
    if f.isBot(click.UserAgent) {
        score += 0.9
        reasons = append(reasons, "bot_detected")
    }
    
    // Ø§Ù„Ø·Ø¨Ù‚Ø© 2: ÙƒØ´Ù IP Ù…Ø±ÙƒØ² Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    if f.isDatacenterIP(click.IPAddress) {
        score += 0.7
        reasons = append(reasons, "datacenter_ip")
    }
    
    // Ø§Ù„Ø·Ø¨Ù‚Ø© 3: ÙØ­Øµ Ø³Ø±Ø¹Ø© Ø§Ù„Ù†Ù‚Ø±
    if f.isHighVelocity(click.UserID, click.IPAddress) {
        score += 0.5
        reasons = append(reasons, "high_velocity")
    }
    
    // Ø§Ù„Ø·Ø¨Ù‚Ø© 4: ÙƒØ´Ù Ø­Ø´Ùˆ Ø§Ù„ÙƒÙˆÙƒÙŠØ²
    if f.isCookieStuffing(click) {
        score += 0.8
        reasons = append(reasons, "cookie_stuffing")
    }
    
    // Ø§Ù„Ø·Ø¨Ù‚Ø© 5: ÙƒØ´Ù Ø§Ù†ØªØ­Ø§Ù„ Ø§Ù„Ù…ÙØ­ÙŠÙ„
    if f.isRefererSpoofed(click.Referrer, click.UserAgent) {
        score += 0.6
        reasons = append(reasons, "referer_spoofing")
    }
    
    return FraudResult{
        Score:    math.Min(score, 1.0),
        Reasons:  reasons,
        IsValid:  score < 0.5,
    }
}
```

### ğŸ”’ ØªØ±ÙˆÙŠØ³Ø§Øª Ø§Ù„Ø£Ù…Ø§Ù†

```go
func SecurityMiddleware() gin.HandlerFunc {
    return func(c *gin.Context) {
        // HSTS
        c.Header("Strict-Transport-Security", "max-age=31536000; includeSubDomains")
        
        // Ø­Ù…Ø§ÙŠØ© XSS
        c.Header("X-XSS-Protection", "1; mode=block")
        
        // Ø®ÙŠØ§Ø±Ø§Øª Ù†ÙˆØ¹ Ø§Ù„Ù…Ø­ØªÙˆÙ‰
        c.Header("X-Content-Type-Options", "nosniff")
        
        // Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø¥Ø·Ø§Ø±
        c.Header("X-Frame-Options", "DENY")
        
        // CSP
        c.Header("Content-Security-Policy", "default-src 'self'")
        
        // Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ù…ÙØ­ÙŠÙ„
        c.Header("Referrer-Policy", "strict-origin-when-cross-origin")
        
        c.Next()
    }
}
```

---

## 10. Ø§Ù„Ø§Ø³ØªÙ‡Ø¯Ø§Ù Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ

### ğŸŒ ØªØ­Ø¯ÙŠØ¯ GeoIP

```go
type GeoIPService struct {
    client *http.Client
    cache  *cache.Cache
    maxmind *geoip2.Reader // Ø§Ø®ØªÙŠØ§Ø±ÙŠ: Ù‚Ø§Ø¹Ø¯Ø© MaxMind
}

func (s *GeoIPService) GetCountryCode(ip string) (string, error) {
    // 1. ÙØ­Øµ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª
    if cached, found := s.cache.Get(ip); found {
        return cached.(string), nil
    }
    
    // 2. ØªØ®Ø·ÙŠ IPs Ø§Ù„Ø®Ø§ØµØ©
    if isPrivateIP(ip) {
        return "", nil
    }
    
    // 3. ØªØ¬Ø±Ø¨Ø© MaxMind (Ø¥Ø°Ø§ Ù…ØªÙˆÙØ±)
    if s.maxmind != nil {
        record, err := s.maxmind.Country(net.ParseIP(ip))
        if err == nil {
            country := record.Country.IsoCode
            s.cache.Set(ip, country, 24*time.Hour)
            return country, nil
        }
    }
    
    // 4. Ø§Ù„Ø±Ø¬ÙˆØ¹ Ù„Ù€ ip-api.com
    resp, err := s.client.Get(fmt.Sprintf(
        "http://ip-api.com/json/%s?fields=status,countryCode", ip))
    if err != nil {
        return "", err
    }
    
    var result struct {
        Status      string `json:"status"`
        CountryCode string `json:"countryCode"`
    }
    json.NewDecoder(resp.Body).Decode(&result)
    
    if result.Status == "success" {
        s.cache.Set(ip, result.CountryCode, 24*time.Hour)
        return result.CountryCode, nil
    }
    
    return "", ErrGeoIPFailed
}
```

### ğŸ¯ Ù…Ù†Ø·Ù‚ Ø§Ù„Ø§Ø³ØªÙ‡Ø¯Ø§Ù Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ

```go
func (h *ClickHandler) checkGeoTargeting(offer *Offer, country string) error {
    // ÙØ­Øµ Ø§Ù„Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø­Ø¸ÙˆØ±Ø© Ø£ÙˆÙ„Ø§Ù‹
    if len(offer.BlockedCountries) > 0 {
        for _, blocked := range offer.BlockedCountries {
            if strings.EqualFold(blocked, country) {
                return ErrCountryBlocked
            }
        }
    }
    
    // ÙØ­Øµ Ø§Ù„Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø³ØªÙ‡Ø¯ÙØ© (Ø¥Ø°Ø§ Ù…Ø­Ø¯Ø¯Ø©)
    if len(offer.TargetCountries) > 0 {
        found := false
        for _, target := range offer.TargetCountries {
            if strings.EqualFold(target, country) {
                found = true
                break
            }
        }
        if !found {
            return ErrCountryNotTargeted
        }
    }
    
    return nil
}
```

---

## 11. Ø¯Ù„ÙŠÙ„ Ø§Ù„ØªØ«Ø¨ÙŠØª ÙˆØ§Ù„Ù†Ø´Ø±

### ğŸ› ï¸ Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©

| Ø§Ù„Ù…ÙƒÙˆÙ† | Ø§Ù„Ø¥ØµØ¯Ø§Ø± | Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª |
|--------|---------|----------|
| Go | 1.21+ | ØªØ·ÙˆÙŠØ± Backend |
| PostgreSQL | 15+ | Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© |
| Redis | 7.0+ | Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª ÙˆØ§Ù„Ø­Ø§Ø¬Ø² |
| Node.js | 18+ | Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… |
| Flutter | 3.16+ | ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù‡Ø§ØªÙ |
| Docker | 24+ | Ø§Ø®ØªÙŠØ§Ø±ÙŠØŒ Ù„Ù„Ø­Ø§ÙˆÙŠØ§Øª |

### ğŸ“¦ Ø¥Ø¹Ø¯Ø§Ø¯ Backend

```bash
# 1. Ø§Ø³ØªÙ†Ø³Ø§Ø® Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹
git clone https://github.com/your-org/afftok.git
cd afftok/backend

# 2. ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ¨Ø¹ÙŠØ§Øª
go mod download

# 3. Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ¦Ø©
cp .env.example .env
nano .env

# 4. ØªØ´ØºÙŠÙ„ ØªØ±Ø­ÙŠÙ„Ø§Øª Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
go run cmd/migrate/main.go up

# 5. Ø¨Ø°Ø± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£ÙˆÙ„ÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
go run cmd/seed/main.go

# 6. ØªØ´ØºÙŠÙ„ Ø§Ù„Ø®Ø§Ø¯Ù…
go run cmd/api/main.go

# Ø£Ùˆ Ø§Ù„Ø¨Ù†Ø§Ø¡ ÙˆØ§Ù„ØªØ´ØºÙŠÙ„
go build -o afftok cmd/api/main.go
./afftok
```

### ğŸ”§ Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø©

```bash
# Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
DATABASE_URL=postgres://user:pass@host:5432/afftok?sslmode=require

# Redis
REDIS_URL=redis://user:pass@host:6379

# JWT
JWT_SECRET=your-super-secret-key-min-32-chars
JWT_EXPIRY=15m
REFRESH_TOKEN_EXPIRY=168h

# Ø§Ù„Ø®Ø§Ø¯Ù…
PORT=8080
ENV=production
DOMAIN=go.afftokapp.com

# GeoIP
GEOIP_PROVIDER=ip-api  # Ø£Ùˆ maxmind
MAXMIND_LICENSE_KEY=your-key  # Ø¥Ø°Ø§ ØªØ³ØªØ®Ø¯Ù… MaxMind

# Ø§Ù„Ø£Ù…Ø§Ù†
HMAC_SECRET=your-hmac-secret-key
RATE_LIMIT_RPS=100
RATE_LIMIT_BURST=200

# Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ©
IMGBB_API_KEY=your-imgbb-key
```

### ğŸš€ Ø§Ù„Ù†Ø´Ø± Ø¹Ù„Ù‰ Railway

```yaml
# railway.toml
[build]
builder = "go"
buildCommand = "go build -o main cmd/api/main.go"

[deploy]
startCommand = "./main"
healthcheckPath = "/health"
healthcheckTimeout = 30

[env]
GO_VERSION = "1.21"
CGO_ENABLED = "0"
```

### ğŸ³ Ø§Ù„Ù†Ø´Ø± Ø¨Ù€ Docker

```dockerfile
# Dockerfile
FROM golang:1.21-alpine AS builder

WORKDIR /app
COPY go.mod go.sum ./
RUN go mod download

COPY . .
RUN CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -o main cmd/api/main.go

FROM alpine:3.19
RUN apk --no-cache add ca-certificates tzdata

WORKDIR /root/
COPY --from=builder /app/main .
COPY --from=builder /app/public ./public

EXPOSE 8080
CMD ["./main"]
```

---

## 12. Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± ÙˆØ§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆÙ‡Ø§Øª

### ğŸ§ª ÙØ¦Ø§Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±

#### Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„ÙˆØ­Ø¯Ø©

```go
// handlers/click_test.go
func TestTrackClick_ValidCode(t *testing.T) {
    // Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯
    handler := NewClickHandler(testDB)
    w := httptest.NewRecorder()
    c, _ := gin.CreateTestContext(w)
    c.Params = gin.Params{{Key: "code", Value: "validCode123"}}
    
    // Ù…Ø­Ø§ÙƒØ§Ø© Redis
    mockRedis.Set("track:validCode123", 456, 0)
    
    // Ø§Ù„ØªÙ†ÙÙŠØ°
    handler.TrackClick(c)
    
    // Ø§Ù„ØªØ£ÙƒÙŠØ¯
    assert.Equal(t, http.StatusFound, w.Code)
    assert.Contains(t, w.Header().Get("Location"), "offer-destination.com")
}

func TestTrackClick_InvalidCode(t *testing.T) {
    handler := NewClickHandler(testDB)
    w := httptest.NewRecorder()
    c, _ := gin.CreateTestContext(w)
    c.Params = gin.Params{{Key: "code", Value: "invalidCode"}}
    
    handler.TrackClick(c)
    
    assert.Equal(t, http.StatusNotFound, w.Code)
}

func TestTrackClick_BlockedCountry(t *testing.T) {
    handler := NewClickHandler(testDB)
    w := httptest.NewRecorder()
    c, _ := gin.CreateTestContext(w)
    c.Params = gin.Params{{Key: "code", Value: "validCode123"}}
    c.Request, _ = http.NewRequest("GET", "/c/validCode123", nil)
    c.Request.Header.Set("CF-IPCountry", "SY")  // Ø¯ÙˆÙ„Ø© Ù…Ø­Ø¸ÙˆØ±Ø©
    
    handler.TrackClick(c)
    
    assert.Equal(t, http.StatusForbidden, w.Code)
}
```

#### Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„ØªÙƒØ§Ù…Ù„

```go
// integration/api_test.go
func TestFullConversionFlow(t *testing.T) {
    // 1. ØªØ³Ø¬ÙŠÙ„ Ù…Ø³ØªØ®Ø¯Ù…
    userResp := POST("/api/auth/register", RegisterRequest{
        Username: "testuser",
        Email:    "test@example.com",
        Password: "TestPass123!",
    })
    assert.Equal(t, 201, userResp.Code)
    
    token := userResp.Body.Token
    
    // 2. Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù… Ù„Ù„Ø¹Ø±Ø¶
    joinResp := POSTAuth("/api/offers/1/join", token, nil)
    assert.Equal(t, 200, joinResp.Code)
    
    trackingCode := joinResp.Body.TrackingURL
    
    // 3. Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„Ù†Ù‚Ø±Ø©
    clickResp := GET("/c/" + trackingCode)
    assert.Equal(t, 302, clickResp.Code)
    
    // 4. Ø¥Ø±Ø³Ø§Ù„ postback
    postbackResp := POST("/api/postback", PostbackRequest{
        ClickID:       trackingCode,
        TransactionID: "TXN-TEST-001",
        Amount:        99.99,
        Status:        "approved",
    })
    assert.Equal(t, 200, postbackResp.Code)
    
    // 5. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØªØ­ÙˆÙŠÙ„
    convResp := GETAuth("/api/conversions/latest", token)
    assert.Equal(t, "TXN-TEST-001", convResp.Body.TransactionID)
}
```

#### Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ø­Ù…Ù„

```javascript
// k6/load_test.js
import http from 'k6/http';
import { check, sleep } from 'k6';

export const options = {
  stages: [
    { duration: '1m', target: 100 },   // Ø§Ù„ØªØµØ¹ÙŠØ¯ Ù„Ù€ 100 Ù…Ø³ØªØ®Ø¯Ù…
    { duration: '5m', target: 100 },   // Ø§Ù„Ø¨Ù‚Ø§Ø¡ Ø¹Ù„Ù‰ 100 Ù…Ø³ØªØ®Ø¯Ù…
    { duration: '1m', target: 500 },   // Ø§Ù„ØªØµØ¹ÙŠØ¯ Ù„Ù€ 500 Ù…Ø³ØªØ®Ø¯Ù…
    { duration: '5m', target: 500 },   // Ø§Ù„Ø¨Ù‚Ø§Ø¡ Ø¹Ù„Ù‰ 500 Ù…Ø³ØªØ®Ø¯Ù…
    { duration: '2m', target: 0 },     // Ø§Ù„ØªØ®ÙÙŠØ¶
  ],
  thresholds: {
    http_req_duration: ['p(95)<200'],  // 95% Ù…Ù† Ø§Ù„Ø·Ù„Ø¨Ø§Øª ØªØ­Øª 200ms
    http_req_failed: ['rate<0.01'],    // Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø®Ø·Ø£ ØªØ­Øª 1%
  },
};

export default function () {
  // Ø§Ø®ØªØ¨Ø§Ø± Ù†Ù‚Ø·Ø© Ù†Ù‡Ø§ÙŠØ© ØªØªØ¨Ø¹ Ø§Ù„Ù†Ù‚Ø±Ø§Øª
  const res = http.get('https://go.afftokapp.com/c/testCode123');
  
  check(res, {
    'Ø§Ù„Ø­Ø§Ù„Ø© 302 Ø£Ùˆ 403': (r) => r.status === 302 || r.status === 403,
    'Ø²Ù…Ù† Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø© < 200ms': (r) => r.timings.duration < 200,
  });
  
  sleep(1);
}
```

### ğŸ“‹ Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆÙ‡Ø§Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±

#### Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆÙ‡Ø§Øª Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©

| Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ | Ø§Ù„Ù…Ø¯Ø®Ù„ | Ø§Ù„Ù…Ø®Ø±Ø¬ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹ |
|-----------|--------|----------------|
| ØªØ³Ø¬ÙŠÙ„ ØµØ§Ù„Ø­ | Ø¨Ø±ÙŠØ¯ ÙˆÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± ØµØ§Ù„Ø­ÙŠÙ† | 201 + Ø±Ù…Ø² |
| Ø¨Ø±ÙŠØ¯ Ù…ÙƒØ±Ø± | Ø¨Ø±ÙŠØ¯ Ù…ÙˆØ¬ÙˆØ¯ | 409 Conflict |
| ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø¶Ø¹ÙŠÙØ© | "12345" | 400 + Ø®Ø·Ø£ ØªØ­Ù‚Ù‚ |
| Ø¯Ø®ÙˆÙ„ ØµØ§Ù„Ø­ | Ø¨ÙŠØ§Ù†Ø§Øª ØµØ­ÙŠØ­Ø© | 200 + Ø±Ù…Ø² |
| Ø¯Ø®ÙˆÙ„ ØºÙŠØ± ØµØ§Ù„Ø­ | ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø®Ø§Ø·Ø¦Ø© | 401 Unauthorized |
| Ø±Ù…Ø² Ù…Ù†ØªÙ‡ÙŠ | JWT Ù‚Ø¯ÙŠÙ… | 401 + ØªØ­Ø¯ÙŠØ« Ù…Ø·Ù„ÙˆØ¨ |
| Ø±Ù…Ø² ØºÙŠØ± ØµØ§Ù„Ø­ | JWT Ù…Ø´ÙˆÙ‡ | 401 Unauthorized |

#### Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆÙ‡Ø§Øª ØªØªØ¨Ø¹ Ø§Ù„Ù†Ù‚Ø±Ø§Øª

| Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ | Ø§Ù„Ù…Ø¯Ø®Ù„ | Ø§Ù„Ù…Ø®Ø±Ø¬ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹ |
|-----------|--------|----------------|
| Ù†Ù‚Ø±Ø© ØµØ§Ù„Ø­Ø© | ÙƒÙˆØ¯ ØªØªØ¨Ø¹ ØµØ§Ù„Ø­ | 302 Redirect |
| ÙƒÙˆØ¯ ØºÙŠØ± ØµØ§Ù„Ø­ | ÙƒÙˆØ¯ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ | 404 Not Found |
| Ø¹Ø±Ø¶ Ù…Ù†ØªÙ‡ÙŠ | Ø¹Ø±Ø¶ ØºÙŠØ± Ù†Ø´Ø· | 410 Gone |
| Ø¯ÙˆÙ„Ø© Ù…Ø­Ø¸ÙˆØ±Ø© | Ø¯ÙˆÙ„Ø© ÙÙŠ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø­Ø¸ÙˆØ± | 403 Forbidden |
| ÙƒØ´Ù Ø±ÙˆØ¨ÙˆØª | User-Agent Ø±ÙˆØ¨ÙˆØª | 403 + Ø¹Ù„Ø§Ù…Ø© Ø§Ø­ØªÙŠØ§Ù„ |
| ØªØ­Ø¯ÙŠØ¯ Ù…Ø¹Ø¯Ù„ | >100 Ø·Ù„Ø¨/Ø¯Ù‚ÙŠÙ‚Ø© | 429 Too Many Requests |
| Ù†Ù‚Ø±Ø© Ù…ÙƒØ±Ø±Ø© | Ù†ÙØ³ IP ÙÙŠ 10 Ø«ÙˆØ§Ù†ÙŠ | 200 Ù„ÙƒÙ† Ù„Ø§ ØªÙØ­Ø³Ø¨ |

#### Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆÙ‡Ø§Øª Ø§Ù„ØªØ­ÙˆÙŠÙ„

| Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ | Ø§Ù„Ù…Ø¯Ø®Ù„ | Ø§Ù„Ù…Ø®Ø±Ø¬ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹ |
|-----------|--------|----------------|
| ØªØ­ÙˆÙŠÙ„ ØµØ§Ù„Ø­ | click_id + ØªÙˆÙ‚ÙŠØ¹ ØµØ§Ù„Ø­ | 200 + conversion_id |
| ØªÙˆÙ‚ÙŠØ¹ ØºÙŠØ± ØµØ§Ù„Ø­ | HMAC Ø®Ø§Ø·Ø¦ | 401 Unauthorized |
| Ù…Ø¹Ø§Ù…Ù„Ø© Ù…ÙƒØ±Ø±Ø© | Ù†ÙØ³ transaction_id | 409 Conflict |
| Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù†Ù‚Ø±Ø© Ù…Ø·Ø§Ø¨Ù‚Ø© | click_id ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ | 404 Not Found |
| Ù†Ù‚Ø±Ø© Ù…Ù†ØªÙ‡ÙŠØ© | Ù†Ù‚Ø±Ø© > 30 ÙŠÙˆÙ… | 410 Gone |

#### Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆÙ‡Ø§Øª ÙƒØ´Ù Ø§Ù„Ø§Ø­ØªÙŠØ§Ù„

| Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ | Ø¯Ø±Ø¬Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ù„ | Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ |
|-----------|---------------|---------|
| Ù…Ø³ØªØ®Ø¯Ù… Ø¹Ø§Ø¯ÙŠ | 0.0 - 0.2 | Ù‚Ø¨ÙˆÙ„ |
| Ù…Ø´Ø¨ÙˆÙ‡ | 0.2 - 0.5 | Ù‚Ø¨ÙˆÙ„ + Ø¹Ù„Ø§Ù…Ø© |
| Ø§Ø­ØªÙŠØ§Ù„ Ù…Ø­ØªÙ…Ù„ | 0.5 - 0.8 | Ø±ÙØ¶ + ØªØ³Ø¬ÙŠÙ„ |
| Ø§Ø­ØªÙŠØ§Ù„ Ù…Ø¤ÙƒØ¯ | 0.8 - 1.0 | Ø±ÙØ¶ + Ø­Ø¸Ø± IP |

---

## 13. Ø§Ø³ØªÙƒØ´Ø§Ù Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ ÙˆØ­Ù„Ù‡Ø§

### âŒ Ù…Ø±Ø¬Ø¹ Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡

| Ø§Ù„ÙƒÙˆØ¯ | Ø§Ù„Ø§Ø³Ù… | Ø§Ù„ÙˆØµÙ | Ø§Ù„Ø­Ù„ |
|-------|-------|-------|------|
| `AUTH_001` | Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± ØµØ§Ù„Ø­Ø© | Ø¹Ø¯Ù… ØªØ·Ø§Ø¨Ù‚ Ø§Ù„Ø¨Ø±ÙŠØ¯/ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± | ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª |
| `AUTH_002` | Ø±Ù…Ø² Ù…Ù†ØªÙ‡ÙŠ | Ø§Ù†ØªÙ‡Ù‰ Ø±Ù…Ø² JWT | Ø­Ø¯Ù‘Ø« Ø§Ù„Ø±Ù…Ø² |
| `AUTH_003` | Ø±Ù…Ø² ØºÙŠØ± ØµØ§Ù„Ø­ | JWT Ù…Ø´ÙˆÙ‡ | Ø£Ø¹Ø¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ |
| `AUTH_004` | Ø­Ø³Ø§Ø¨ Ù…Ø¹Ø·Ù„ | Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø­Ø¸ÙˆØ±/ØºÙŠØ± Ù†Ø´Ø· | ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¯Ø¹Ù… |
| `OFFER_001` | Ø¹Ø±Ø¶ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ | Ù…Ø¹Ø±Ù Ø¹Ø±Ø¶ ØºÙŠØ± ØµØ§Ù„Ø­ | ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ø¹Ø±Ù |
| `OFFER_002` | Ø¹Ø±Ø¶ ØºÙŠØ± Ù†Ø´Ø· | Ø­Ø§Ù„Ø© Ø§Ù„Ø¹Ø±Ø¶ Ù„ÙŠØ³Øª Ù†Ø´Ø·Ø© | Ø§Ø³ØªØ®Ø¯Ù… Ø¹Ø±Ø¶Ø§Ù‹ Ù†Ø´Ø·Ø§Ù‹ |
| `OFFER_003` | Ù…Ù†Ø¶Ù… Ù…Ø³Ø¨Ù‚Ø§Ù‹ | Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù†Ø¶Ù… Ù„Ù„Ø¹Ø±Ø¶ | Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø­Ø§Ù„ÙŠ |
| `CLICK_001` | ÙƒÙˆØ¯ ØªØªØ¨Ø¹ ØºÙŠØ± ØµØ§Ù„Ø­ | Ø§Ù„ÙƒÙˆØ¯ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Redis | Ø£Ù†Ø´Ø¦ Ø±Ø§Ø¨Ø·Ø§Ù‹ Ø¬Ø¯ÙŠØ¯Ø§Ù‹ |
| `CLICK_002` | Ø¯ÙˆÙ„Ø© Ù…Ø­Ø¸ÙˆØ±Ø© | Ø¯ÙˆÙ„Ø© IP ÙÙŠ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø­Ø¸ÙˆØ± | Ø§Ø³ØªØ®Ø¯Ù… Ø¯ÙˆÙ„Ø© Ù…Ø³Ù…ÙˆØ­Ø© |
| `CLICK_003` | Ø§Ø­ØªÙŠØ§Ù„ Ù…ÙƒØªØ´Ù | Ø¯Ø±Ø¬Ø© Ø§Ø­ØªÙŠØ§Ù„ Ø¹Ø§Ù„ÙŠØ© | ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¯Ø¹Ù… |
| `CLICK_004` | ØªØ­Ø¯ÙŠØ¯ Ù…Ø¹Ø¯Ù„ | Ø·Ù„Ø¨Ø§Øª ÙƒØ«ÙŠØ±Ø© | Ø§Ù†ØªØ¸Ø± ÙˆØ£Ø¹Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© |
| `CONV_001` | ØªÙˆÙ‚ÙŠØ¹ ØºÙŠØ± ØµØ§Ù„Ø­ | ÙØ´Ù„ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† HMAC | ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªÙˆÙ‚ÙŠØ¹ |
| `CONV_002` | Ù…Ø¹Ø§Ù…Ù„Ø© Ù…ÙƒØ±Ø±Ø© | Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© Ù…Ø³Ø¬Ù„Ø© Ù…Ø³Ø¨Ù‚Ø§Ù‹ | Ø§Ø³ØªØ®Ø¯Ù… Ù…Ø¹Ø±ÙØ§Ù‹ ÙØ±ÙŠØ¯Ø§Ù‹ |
| `CONV_003` | Ù†Ù‚Ø±Ø© Ù…Ù†ØªÙ‡ÙŠØ© | Ø§Ù„Ù†Ù‚Ø±Ø© Ø£Ù‚Ø¯Ù… Ù…Ù† 30 ÙŠÙˆÙ… | Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø­Ù„ |
| `GEO_001` | ÙØ´Ù„ GeoIP | Ù„Ù… Ù†ØªÙ…ÙƒÙ† Ù…Ù† ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø¯ÙˆÙ„Ø© | ØªØ­Ù‚Ù‚ Ù…Ù† ØªØ±ÙˆÙŠØ³Ø§Øª IP |
| `DB_001` | ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ | Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± Ù…ØªØ§Ø­Ø© | ØªØ­Ù‚Ù‚ Ù…Ù† Ø³Ù„Ø³Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„ |
| `REDIS_001` | ØºÙŠØ§Ø¨ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª | Ø§Ù„Ù…ÙØªØ§Ø­ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ | Ø³ÙŠØªØ¹Ø§ÙÙ‰ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ |

### ğŸ”§ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø´Ø§Ø¦Ø¹Ø© ÙˆØ§Ù„Ø­Ù„ÙˆÙ„

#### Ø§Ù„Ù…Ø´ÙƒÙ„Ø©: Ø£Ø®Ø·Ø§Ø¡ "Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„Ø±Ù…Ø²"

**Ø§Ù„Ø£Ø¹Ø±Ø§Ø¶:**
- Ø£Ø®Ø·Ø§Ø¡ 401 Ø¨Ø¹Ø¯ 15 Ø¯Ù‚ÙŠÙ‚Ø©
- ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù‡Ø§ØªÙ ÙŠØªØ·Ù„Ø¨ Ø¥Ø¹Ø§Ø¯Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„

**Ø§Ù„Ø­Ù„:**
```javascript
// ØªÙ†ÙÙŠØ° ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±Ù…Ø² ÙÙŠ Ù…Ø¹ØªØ±Ø¶ API
api.interceptors.response.use(
  response => response,
  async error => {
    if (error.response?.status === 401 && !error.config._retry) {
      error.config._retry = true;
      const newToken = await refreshToken();
      error.config.headers.Authorization = `Bearer ${newToken}`;
      return api(error.config);
    }
    return Promise.reject(error);
  }
);
```

#### Ø§Ù„Ù…Ø´ÙƒÙ„Ø©: Ø§Ù„Ù†Ù‚Ø±Ø§Øª Ù„Ø§ ØªÙØªØ¨Ø¹

**Ø§Ù„Ø£Ø¹Ø±Ø§Ø¶:**
- Ø±Ø§Ø¨Ø· Ø§Ù„ØªØªØ¨Ø¹ ÙŠØ¹ÙŠØ¯ Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ù„ÙƒÙ† Ù„Ø§ Ù†Ù‚Ø±Ø© Ù…Ø³Ø¬Ù„Ø©
- Ø¹Ø¯Ø¯ Ø§Ù„Ù†Ù‚Ø±Ø§Øª Ù„Ø§ ÙŠØ²ÙŠØ¯

**Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙØ­Øµ:**
1. âœ… ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ØªØµØ§Ù„ Redis
2. âœ… ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ ÙƒÙˆØ¯ Ø§Ù„ØªØªØ¨Ø¹ ÙÙŠ Redis
3. âœ… ØªØ­Ù‚Ù‚ Ø£Ù† ÙƒØ´Ù Ø§Ù„Ø§Ø­ØªÙŠØ§Ù„ Ù„Ø§ ÙŠØ­Ø¸Ø±
4. âœ… ØªØ­Ù‚Ù‚ Ø£Ù† GeoIP Ù„Ø§ ÙŠØ­Ø¸Ø± Ø§Ù„Ø¯ÙˆÙ„Ø©
5. âœ… ØªØ­Ù‚Ù‚ Ø£Ù† ÙƒØ§ØªØ¨ Ø§Ù„Ø¯ÙØ¹Ø§Øª ÙŠØ¹Ù…Ù„

**Ø£Ù…Ø± Ø§Ù„ØªØµØ­ÙŠØ­:**
```bash
# ÙØ­Øµ Redis Ù„ÙƒÙˆØ¯ Ø§Ù„ØªØªØ¨Ø¹
redis-cli GET "track:ABC123"

# ÙØ­Øµ Ø­Ø§Ø¬Ø² Ø§Ù„Ù†Ù‚Ø±Ø§Øª
redis-cli LLEN "clicks:buffer"

# ÙØ­Øµ Ø§Ù„Ø³Ø¬Ù„Ø§Øª
tail -f logs/clicks.log | grep "ABC123"
```

#### Ø§Ù„Ù…Ø´ÙƒÙ„Ø©: Ø§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª Ù„Ø§ ØªØ¸Ù‡Ø±

**Ø§Ù„Ø£Ø¹Ø±Ø§Ø¶:**
- Postback ÙŠØ±Ø¬Ø¹ 200 Ù„ÙƒÙ† Ù„Ø§ ØªØ­ÙˆÙŠÙ„
- Ø§Ù„Ø¹Ù…ÙˆÙ„Ø© Ù„Ù… ØªÙØ¶Ù

**Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙØ­Øµ:**
1. âœ… ØªØ­Ù‚Ù‚ Ù…Ù† ØªÙˆÙ‚ÙŠØ¹ postback
2. âœ… ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ click_id
3. âœ… ØªØ­Ù‚Ù‚ Ø£Ù† transaction_id ÙØ±ÙŠØ¯
4. âœ… ØªØ­Ù‚Ù‚ Ø£Ù† Ø§Ù„Ù†Ù‚Ø±Ø© Ù„ÙŠØ³Øª Ù…Ù†ØªÙ‡ÙŠØ© (30 ÙŠÙˆÙ…)
5. âœ… ØªØ­Ù‚Ù‚ Ø£Ù† Ø§Ù„Ù…Ø¨Ù„Øº > 0

**Ø§Ù„ØªØµØ­ÙŠØ­:**
```bash
# ÙØ­Øµ Ø³Ø¬Ù„Ø§Øª postback
grep "postback" logs/api.log | grep "TXN-123"

# Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„Ù†Ù‚Ø±Ø©
SELECT * FROM clicks WHERE tracking_code = 'ABC123';

# ÙØ­Øµ Ø§Ù„ØªÙƒØ±Ø§Ø±
SELECT * FROM conversions WHERE transaction_id = 'TXN-123';
```

#### Ø§Ù„Ù…Ø´ÙƒÙ„Ø©: Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ù„Ø§ ØªÙØ­Ù…Ù‘Ù„

**Ø§Ù„Ø£Ø¹Ø±Ø§Ø¶:**
- Ø´Ø§Ø´Ø© Ø¨ÙŠØ¶Ø§Ø¡
- Ø£Ø®Ø·Ø§Ø¡ ÙÙŠ Console

**Ø§Ù„Ø­Ù„:**
```bash
# Ù…Ø³Ø­ ØªØ®Ø²ÙŠÙ† Ø§Ù„Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù…Ø¤Ù‚Øª
cd admin
rm -rf node_modules/.cache
rm -rf .next

# Ø¥Ø¹Ø§Ø¯Ø© ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ¨Ø¹ÙŠØ§Øª
pnpm install

# Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¨Ù†Ø§Ø¡
pnpm build

# ÙØ­Øµ Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø©
cat .env | grep -E "DATABASE_URL|JWT_SECRET"
```

#### Ø§Ù„Ù…Ø´ÙƒÙ„Ø©: GeoIP ÙŠØ±Ø¬Ø¹ Ø¯ÙˆÙ„Ø© ÙØ§Ø±ØºØ©

**Ø§Ù„Ø£Ø¹Ø±Ø§Ø¶:**
- Ø­Ù‚Ù„ Ø§Ù„Ø¯ÙˆÙ„Ø© ÙØ§Ø±Øº ÙÙŠ Ø§Ù„Ù†Ù‚Ø±Ø§Øª
- Ø§Ù„Ø§Ø³ØªÙ‡Ø¯Ø§Ù Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ Ù„Ø§ ÙŠØ¹Ù…Ù„

**Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙØ­Øµ:**
1. âœ… ØªØ­Ù‚Ù‚ Ø£Ù† Cloudflare Ù…ÙØ¹Ø¯ (ØªØ±ÙˆÙŠØ³Ø© CF-IPCountry)
2. âœ… ØªØ­Ù‚Ù‚ Ø£Ù† ip-api.com Ù…ØªØ§Ø­
3. âœ… ØªØ­Ù‚Ù‚ Ù…Ù† ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ø¹Ø¯Ù„ (150 Ø·Ù„Ø¨/Ø¯Ù‚ÙŠÙ‚Ø© Ù„Ù„Ù…Ø¬Ø§Ù†ÙŠ)
4. âœ… ØªØ­Ù‚Ù‚ Ø£Ù† IP Ù„ÙŠØ³ Ø®Ø§Øµ/localhost

**Ø§Ù„Ø­Ù„:**
```go
// Ø¥Ø¶Ø§ÙØ© ØªØ±ÙˆÙŠØ³Ø§Øª Ø¨Ø¯ÙŠÙ„Ø©
func getCountryFromRequest(c *gin.Context) string {
    // ØªØ¬Ø±Ø¨Ø© ØªØ±ÙˆÙŠØ³Ø§Øª Ù…ØªØ¹Ø¯Ø¯Ø©
    headers := []string{
        "CF-IPCountry",
        "X-Country",
        "X-Geo-Country",
        "X-Vercel-IP-Country",
    }
    
    for _, h := range headers {
        if country := c.GetHeader(h); country != "" {
            return strings.ToUpper(country)
        }
    }
    
    // Ø§Ù„Ø±Ø¬ÙˆØ¹ Ù„Ø®Ø¯Ù…Ø© GeoIP
    return geoipService.GetCountryCode(c.ClientIP())
}
```

### ğŸ“Š Ù†Ù‚Ø§Ø· Ù†Ù‡Ø§ÙŠØ© ÙØ­Øµ Ø§Ù„ØµØ­Ø©

```bash
# ØµØ­Ø© API
curl https://go.afftokapp.com/health
# Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©: {"status":"ok","timestamp":"2025-12-08T10:00:00Z"}

# ØµØ­Ø© Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
curl https://go.afftokapp.com/health/db
# Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©: {"status":"ok","latency_ms":5}

# ØµØ­Ø© Redis
curl https://go.afftokapp.com/health/redis
# Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©: {"status":"ok","latency_ms":1}

# ÙØ­Øµ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ÙƒØ§Ù…Ù„
curl https://go.afftokapp.com/health/full
# Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©: {
#   "status": "ok",
#   "services": {
#     "database": "ok",
#     "redis": "ok",
#     "geoip": "ok"
#   },
#   "version": "2.0.0"
# }
```

---

## 14. Ù…Ø±Ø¬Ø¹ API ÙˆØ­Ø¯ÙˆØ¯ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…

### ğŸ“Š Ø­Ø¯ÙˆØ¯ Ø§Ù„Ù…Ø¹Ø¯Ù„

| Ù†ÙˆØ¹ Ø§Ù„Ù†Ù‚Ø·Ø© | Ø§Ù„Ø­Ø¯ | Ø§Ù„Ù†Ø§ÙØ°Ø© | Ø§Ù„Ø§Ù†Ø¯ÙØ§Ø¹ |
|------------|------|---------|----------|
| Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© | 10 | 1 Ø¯Ù‚ÙŠÙ‚Ø© | 15 |
| ØªØªØ¨Ø¹ Ø§Ù„Ù†Ù‚Ø±Ø§Øª | 1000 | 1 Ø¯Ù‚ÙŠÙ‚Ø© | 2000 |
| API (Ù…ÙˆØ«Ù‚) | 100 | 1 Ø¯Ù‚ÙŠÙ‚Ø© | 200 |
| API (Ù…Ø¬Ù‡ÙˆÙ„) | 20 | 1 Ø¯Ù‚ÙŠÙ‚Ø© | 30 |
| Postback | 500 | 1 Ø¯Ù‚ÙŠÙ‚Ø© | 1000 |
| Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… | 200 | 1 Ø¯Ù‚ÙŠÙ‚Ø© | 300 |

### ğŸ“ ØªØ±ÙˆÙŠØ³Ø§Øª Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©

```
X-RateLimit-Limit: 100
X-RateLimit-Remaining: 95
X-RateLimit-Reset: 1702036800
X-Request-ID: req_abc123xyz
```

### ğŸ“„ Ø¥ØµØ¯Ø§Ø± API

```
Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ: v1 (Ø¶Ù…Ù†ÙŠ)
Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ: https://go.afftokapp.com/api

Ø§Ù„Ø¥ØµØ¯Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠØ©:
- https://go.afftokapp.com/api/v2
```

---

## 15. Ø¯Ù„ÙŠÙ„ Ø§Ù„ØªØ±Ø­ÙŠÙ„

### Ù…Ù† v1.x Ø¥Ù„Ù‰ v2.0

#### ØªØ±Ø­ÙŠÙ„Ø§Øª Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

```sql
-- Ø¥Ø¶Ø§ÙØ© Ø£Ø¹Ù…Ø¯Ø© Ø¬Ø¯ÙŠØ¯Ø©
ALTER TABLE offers ADD COLUMN title_ar VARCHAR(200);
ALTER TABLE offers ADD COLUMN description_ar TEXT;
ALTER TABLE offers ADD COLUMN payout_type VARCHAR(20) DEFAULT 'cpa';
ALTER TABLE offers ADD COLUMN terms TEXT;
ALTER TABLE offers ADD COLUMN target_countries TEXT[];
ALTER TABLE offers ADD COLUMN blocked_countries TEXT[];

-- Ø¥Ø¶Ø§ÙØ© Ø¬Ø¯ÙˆÙ„ Ø³Ø¬Ù„ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©
CREATE TABLE audit_logs (
    id SERIAL PRIMARY KEY,
    admin_user_id INTEGER REFERENCES admin_users(id),
    action VARCHAR(100) NOT NULL,
    entity_type VARCHAR(50),
    entity_id INTEGER,
    old_value JSONB,
    new_value JSONB,
    ip_address VARCHAR(45),
    created_at TIMESTAMP DEFAULT NOW()
);

-- Ø¥Ø¶Ø§ÙØ© Ø¬Ø¯ÙˆÙ„ Ù…Ø³ØªØ®Ø¯Ù…ÙŠ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©
CREATE TABLE admin_users (
    id SERIAL PRIMARY KEY,
    email VARCHAR(320) UNIQUE NOT NULL,
    username VARCHAR(50) NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    role VARCHAR(30) NOT NULL,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT NOW()
);
```

#### Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª Ø§Ù„Ø¬Ø°Ø±ÙŠØ©

| Ø§Ù„ØªØºÙŠÙŠØ± | v1.x | v2.0 | Ø§Ù„ØªØ±Ø­ÙŠÙ„ |
|---------|------|------|---------|
| Ø±Ø§Ø¨Ø· Ø§Ù„ØªØªØ¨Ø¹ | `/api/c/:code` | `/c/:code` | Ø­Ø¯Ù‘Ø« Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· |
| Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© | `{token}` | `{token, refresh_token}` | Ø­Ø¯Ù‘Ø« Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ |
| Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø¹Ø±ÙˆØ¶ | Ø£Ø³Ø§Ø³ÙŠØ© | Ù…ÙˆØ³Ø¹Ø© | Ø£Ø¶Ù Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© |

---

## 16. Ø§Ù„Ù…ØµØ·Ù„Ø­Ø§Øª

| Ø§Ù„Ù…ØµØ·Ù„Ø­ | Ø§Ù„ØªØ¹Ø±ÙŠÙ |
|---------|---------|
| **Ø§Ù„Ù…Ø±ÙˆØ¬ (Affiliate)** | Ø§Ù„Ø´Ø®Øµ Ø§Ù„Ø°ÙŠ ÙŠØ±ÙˆØ¬ Ù„Ù„Ø¹Ø±ÙˆØ¶ Ù…Ù‚Ø§Ø¨Ù„ Ø¹Ù…ÙˆÙ„Ø© |
| **Ø§Ù„Ù…Ø¹Ù„Ù† (Advertiser)** | Ø§Ù„Ø´Ø±ÙƒØ© Ø§Ù„ØªÙŠ ØªÙ†Ø´Ø¦ Ø§Ù„Ø¹Ø±ÙˆØ¶ |
| **CPA** | Ø§Ù„ØªÙƒÙ„ÙØ© Ù„ÙƒÙ„ Ø¥Ø¬Ø±Ø§Ø¡ - Ø§Ù„Ø¯ÙØ¹ Ù„ÙƒÙ„ ØªØ­ÙˆÙŠÙ„ |
| **CPL** | Ø§Ù„ØªÙƒÙ„ÙØ© Ù„ÙƒÙ„ Ø¹Ù…ÙŠÙ„ Ù…Ø­ØªÙ…Ù„ - Ø§Ù„Ø¯ÙØ¹ Ù„ÙƒÙ„ ØªØ³Ø¬ÙŠÙ„ |
| **CPS** | Ø§Ù„ØªÙƒÙ„ÙØ© Ù„ÙƒÙ„ Ø¨ÙŠØ¹ - Ø§Ù„Ø¯ÙØ¹ Ù„ÙƒÙ„ Ø´Ø±Ø§Ø¡ |
| **Ø§Ù„Ù†Ù‚Ø±Ø© (Click)** | Ø¹Ù†Ø¯Ù…Ø§ ÙŠÙ†Ù‚Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¹Ù„Ù‰ Ø±Ø§Ø¨Ø· Ø§Ù„ØªØªØ¨Ø¹ |
| **Ø§Ù„ØªØ­ÙˆÙŠÙ„ (Conversion)** | Ø¥Ø¬Ø±Ø§Ø¡ Ù†Ø§Ø¬Ø­ (Ø´Ø±Ø§Ø¡ØŒ ØªØ³Ø¬ÙŠÙ„) |
| **EPC** | Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ Ù„ÙƒÙ„ Ù†Ù‚Ø±Ø© |
| **CR** | Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„ |
| **Postback** | Ø¥Ø´Ø¹Ø§Ø± Ø®Ø§Ø¯Ù… Ø¨Ø§Ù„ØªØ­ÙˆÙŠÙ„ |
| **Pixel** | ÙƒÙˆØ¯ JavaScript Ù„Ù„ØªØªØ¨Ø¹ |
| **HMAC** | Ø±Ù…Ø² Ù…ØµØ§Ø¯Ù‚Ø© Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù…Ø¨Ù†ÙŠ Ø¹Ù„Ù‰ Ø§Ù„ØªØ¬Ø²Ø¦Ø© |
| **Ø§Ù„Ø§Ø³ØªÙ‡Ø¯Ø§Ù Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ** | Ø§Ù„Ø§Ø³ØªÙ‡Ø¯Ø§Ù Ø­Ø³Ø¨ Ø§Ù„Ø¯ÙˆÙ„Ø©/Ø§Ù„Ù…ÙˆÙ‚Ø¹ |
| **Ø¯Ø±Ø¬Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ù„** | ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…Ø®Ø§Ø·Ø± 0-1 |
| **RBAC** | Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ù…Ø³ØªÙ†Ø¯ Ù„Ù„Ø£Ø¯ÙˆØ§Ø± |

---

## 17. Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©

### Ø¹Ø§Ù…

**Ø³: Ù…Ø§ Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø¹Ù…ÙˆÙ„Ø© Ø§Ù„Ø°ÙŠ ØªØ¯Ø¹Ù…Ù‡ AffTokØŸ**
Ø¬: Ù†Ù…Ø§Ø°Ø¬ CPAØŒ CPLØŒ CPSØŒ ÙˆHybrid.

**Ø³: ÙƒÙ… Ù…Ø¯Ø© ØµÙ„Ø§Ø­ÙŠØ© Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ØªØªØ¨Ø¹ØŸ**
Ø¬: 90 ÙŠÙˆÙ…Ø§Ù‹ Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹ØŒ Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªØ¹Ø¯ÙŠÙ„ Ù„ÙƒÙ„ Ø¹Ø±Ø¶.

**Ø³: Ù…Ø§ Ø§Ù„Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø¯Ø¹ÙˆÙ…Ø©ØŸ**
Ø¬: Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¯ÙˆÙ„. ÙŠÙ…ÙƒÙ† Ù„Ù„Ù…Ø¹Ù„Ù†ÙŠÙ† Ø§Ø³ØªÙ‡Ø¯Ø§Ù/Ø­Ø¸Ø± Ø¯ÙˆÙ„ Ù…Ø­Ø¯Ø¯Ø©.

### ØªÙ‚Ù†ÙŠ

**Ø³: ÙƒÙŠÙ ÙŠÙÙƒØªØ´Ù Ø§Ù„Ø§Ø­ØªÙŠØ§Ù„ØŸ**
Ø¬: ÙƒØ´Ù Ù…ØªØ¹Ø¯Ø¯ Ø§Ù„Ø·Ø¨Ù‚Ø§Øª: ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø±ÙˆØ¨ÙˆØªØ§ØªØŒ Ø¨ØµÙ…Ø© IPØŒ Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ù†Ù‚Ø±ØŒ ÙƒØ´Ù Ø­Ø´Ùˆ Ø§Ù„ÙƒÙˆÙƒÙŠØ².

**Ø³: Ù…Ø§ Ø¯Ù‚Ø© GeoIPØŸ**
Ø¬: 95%+ Ø¯Ù‚Ø© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… ØªØ±ÙˆÙŠØ³Ø§Øª Cloudflare Ù…Ø¹ ip-api.com ÙƒØ¨Ø¯ÙŠÙ„.

**Ø³: Ù…Ø§ Ø²Ù…Ù† Ø§Ø³ØªØ¬Ø§Ø¨Ø© ØªØªØ¨Ø¹ Ø§Ù„Ù†Ù‚Ø±Ø§ØªØŸ**
Ø¬: p50: 2msØŒ p95: 8msØŒ p99: 15ms

### Ø§Ù„ØªÙƒØ§Ù…Ù„

**Ø³: Ù…Ø§ Ø§Ù„Ù…Ù†ØµØ§Øª Ø§Ù„Ù…Ø¯Ø¹ÙˆÙ…Ø©ØŸ**
Ø¬: ShopifyØŒ Ø³Ù„Ø©ØŒ Ø²Ø¯ØŒ WooCommerceØŒ ÙˆAPI/Pixel Ù…Ø®ØµØµ.

**Ø³: ÙƒÙŠÙ Ø£Ø®ØªØ¨Ø± Ø§Ù„ØªÙƒØ§Ù…Ù„Ø§ØªØŸ**
Ø¬: Ø§Ø³ØªØ®Ø¯Ù… ÙˆØ¶Ø¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ù…Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ø¹ØªÙ…Ø§Ø¯ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù…Ù‚Ø¯Ù…Ø© ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ….

---

## 18. Ø³Ø¬Ù„ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª

### v2.0.0 (Ø¯ÙŠØ³Ù…Ø¨Ø± 2025)

#### Ø§Ù„Ù…Ø¶Ø§Ù
- âœ¨ Ù†Ø¸Ø§Ù… RBAC Ø¨Ù€ 6 Ø£Ù†ÙˆØ§Ø¹ Ø£Ø¯ÙˆØ§Ø±
- âœ¨ Ø¯Ø¹Ù… Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ù„Ù„Ø¹Ø±ÙˆØ¶
- âœ¨ Ø§Ø³ØªÙ‡Ø¯Ø§Ù Ø¬ØºØ±Ø§ÙÙŠ Ù…ØªÙ‚Ø¯Ù… (Ø§Ø³ØªÙ‡Ø¯Ø§Ù/Ø­Ø¸Ø± Ø§Ù„Ø¯ÙˆÙ„)
- âœ¨ Ø³Ø¬Ù„ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©
- âœ¨ Ø¥Ø¯Ø§Ø±Ø© ØªÙƒØ§Ù…Ù„Ø§Øª Ø§Ù„Ù…Ø¹Ù„Ù†ÙŠÙ†
- âœ¨ Ø®Ø¯Ù…Ø© GeoIP Ù…Ø¹ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª
- âœ¨ ÙƒØ´Ù Ø§Ø­ØªÙŠØ§Ù„ Ù…Ø­Ø³Ù† (5 Ø·Ø¨Ù‚Ø§Øª)
- âœ¨ ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø¨Ù€ HMAC

#### Ø§Ù„Ù…ÙØºÙŠÙ‘Ø±
- ğŸ”„ ØµÙŠØºØ© Ø±Ø§Ø¨Ø· Ø§Ù„ØªØªØ¨Ø¹: `/api/c/:code` â†’ `/c/:code`
- ğŸ”„ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: MySQL â†’ PostgreSQL
- ğŸ”„ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù‡Ø§ØªÙ: React Native â†’ Flutter
- ğŸ”„ ØªØ­Ø³ÙŠÙ† ÙˆØ§Ø¬Ù‡Ø© Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…

#### Ø§Ù„Ù…ÙØµÙ„Ø­
- ğŸ› Ø¯Ù‚Ø© ØªØªØ¨Ø¹ Ø§Ù„Ù†Ù‚Ø±Ø§Øª
- ğŸ› Ø¥Ø³Ù†Ø§Ø¯ Ø§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª
- ğŸ› Ù…ÙˆØ«ÙˆÙ‚ÙŠØ© ØªØ­Ø¯ÙŠØ¯ GeoIP

### v1.0.0 (Ù†ÙˆÙÙ…Ø¨Ø± 2025)

- ğŸ‰ Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø£ÙˆÙ„ÙŠ

---

## ğŸ“ Ø§Ù„Ø¯Ø¹Ù…

**Ø§Ù„ØªÙˆØ«ÙŠÙ‚:** https://docs.afftokapp.com  
**Ø­Ø§Ù„Ø© API:** https://status.afftokapp.com  
**Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ:** support@afftokapp.com  
**GitHub:** https://github.com/afftok/afftok

---

**Ø£Ø¹Ø¯Ù‡:** Ø¹Ø¨Ø¯Ø§Ù„Ø¹Ø²ÙŠØ² Ø§Ù„Ø¬Ø¨Ø¹Ù‡  
**Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«:** Ø¯ÙŠØ³Ù…Ø¨Ø± 2025  
**Ø§Ù„Ø¥ØµØ¯Ø§Ø±:** 2.0.0

**Â© 2025 AffTok. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©.**
